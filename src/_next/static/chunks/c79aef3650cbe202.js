(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3116,e=>{"use strict";let s=(0,e.i(75254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>s],3116)},70065,e=>{"use strict";var s=e.i(43476),r=e.i(47163);function t({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function a({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function l({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",e),...t})}function i({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",e),...t})}function o({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",e),...t})}e.s(["Card",()=>t,"CardContent",()=>o,"CardDescription",()=>i,"CardHeader",()=>a,"CardTitle",()=>l])},41071,e=>{"use strict";let s=(0,e.i(75254).default)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);e.s(["MoreHorizontal",()=>s],41071)},88699,e=>{"use strict";let s=(0,e.i(75254).default)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);e.s(["Pencil",()=>s],88699)},84762,e=>{"use strict";var s=e.i(43476),r=e.i(47163);function t({className:e,...t}){return(0,s.jsx)("textarea",{"data-slot":"textarea",className:(0,r.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}e.s(["Textarea",()=>t])},64969,e=>{"use strict";var s=e.i(43476),r=e.i(71645),t=e.i(13293),a=e.i(67881),l=e.i(23750),i=e.i(94179),o=e.i(30374),d=e.i(10708),n=e.i(84762),c=e.i(62870),m=e.i(7233),x=e.i(55436),h=e.i(41071),u=e.i(88699),p=e.i(27612),g=e.i(98919),j=e.i(3116),N=e.i(63059),f=e.i(63415),b=e.i(70065),v=e.i(46696),y=e.i(38036),C=e.i(38447);let w={system:"bg-destructive/10 text-destructive",tenant:"bg-primary/10 text-primary",custom:"bg-warning/10 text-warning"},S={system:"ç³»ç»Ÿè§’è‰²",tenant:"ç§Ÿæˆ·è§’è‰²",custom:"è‡ªå®šä¹‰è§’è‰²"};function D(){let{t:e}=(0,C.useLanguage)(),[D,k]=(0,r.useState)(""),[T,I]=(0,r.useState)(!1),[L,z]=(0,r.useState)(!1),[B,F]=(0,r.useState)(!1),[M,P]=(0,r.useState)(null),[$,O]=(0,r.useState)(null),[R,A]=(0,r.useState)([]),[H,W]=(0,r.useState)([]),[U,E]=(0,r.useState)(!0),[J,K]=(0,r.useState)(1),[V]=(0,r.useState)(10),[_,q]=(0,r.useState)(0),[G,Q]=(0,r.useState)(!1),[X,Y]=(0,r.useState)({roleName:"",roleCode:"",description:"",tenantCode:"",roleStatus:"1"}),[Z,ee]=(0,r.useState)(""),[es,er]=(0,r.useState)(new Set(["1","2"])),et=async(e=J)=>{E(!0);try{let s=await (0,y.fetchWithAuth)(`/admin/roles?current=${e}&size=${V}`),r=await s.json();if(200===r.code&&r.data){let s=r.data;W(s.records||[]),q(Math.ceil(s.total/V)),K(e)}}catch(e){console.error("èŽ·å–è§’è‰²åˆ—è¡¨å¤±è´¥",e)}finally{E(!1)}};(0,r.useEffect)(()=>{let e=setTimeout(()=>{D.trim()?ea(D):et(1)},500);return()=>clearTimeout(e)},[D]);let ea=async e=>{E(!0);try{let s=await (0,y.fetchWithAuth)(`/admin/roles/search?roleName=${encodeURIComponent(e)}&current=1&size=${V}`),r=await s.json();if(200===r.code&&r.data){let e=r.data;W(e.records||[]),q(Math.ceil(e.total/V)),K(1)}}catch(e){console.error("æœç´¢è§’è‰²å¤±è´¥",e)}finally{E(!1)}},el=async e=>{console.log("èŽ·å–è§’è‰²æƒé™ï¼Œè§’è‰²ID:",e);try{let s=await (0,y.fetchWithAuth)(`/admin/permissions/by-role/${e}`),r=await s.json();if(console.log("è§’è‰²æƒé™å“åº”:",r),200===r.code&&r.data){let e=r.data.assignedPermissions||[],s=r.data.unassignedPermissions||[],t=[...e.map(e=>({permissionId:e.permId,permissionCode:e.permCode,permName:e.permName,permissionType:e.permType.toString(),selected:!0})),...s.map(e=>({permissionId:e.permId,permissionCode:e.permCode,permName:e.permName,permissionType:e.permType.toString(),selected:!1}))];console.log("æ‰€æœ‰æƒé™åˆ—è¡¨ (å·²åˆ†é…çš„ä¼šæ ‡è®°ä¸ºselected):",t),A(t)}}catch(e){console.error("èŽ·å–æƒé™åˆ—è¡¨å¤±è´¥",e)}},ei=(0,r.useMemo)(()=>R.filter(e=>""===Z||e.permName.toLowerCase().includes(Z.toLowerCase())||e.permissionCode.toLowerCase().includes(Z.toLowerCase())),[R,Z]),eo=(0,r.useMemo)(()=>{let e={};return ei.forEach(s=>{let r=s.permissionType||"other";e[r]||(e[r]=[]),e[r].push(s)}),e},[ei]),ed=async()=>{if($){Q(!0);try{let e=await (0,y.fetchWithAuth)("/admin/role/update",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({roleId:$.role.roleId,roleName:$.role.roleName,roleCode:$.role.roleCode,description:$.role.description||"",tenantId:$.role.tenantId,permissionIds:R.filter(e=>e.selected).map(e=>e.permissionId)})}),s=await e.json();200===s.code?(z(!1),et(J),v.toast.success("æ›´æ–°è§’è‰²æˆåŠŸ")):v.toast.error(s.message||"æ›´æ–°å¤±è´¥")}catch(e){console.error("æ›´æ–°è§’è‰²å¤±è´¥",e),v.toast.error("æ›´æ–°å¤±è´¥ï¼Œè¯·é‡è¯•")}finally{Q(!1)}}},en=async e=>{if(confirm("ç¡®å®šè¦åˆ é™¤è¯¥è§’è‰²å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚"))try{let s=await (0,y.fetchWithAuth)(`/admin/role/${e}/delete`,{method:"POST"}),r=await s.json();200===r.code?(et(J),v.toast.success("åˆ é™¤æˆåŠŸ")):v.toast.error(r.message||"åˆ é™¤å¤±è´¥")}catch(e){console.error("åˆ é™¤è§’è‰²å¤±è´¥",e),v.toast.error("åˆ é™¤å¤±è´¥ï¼Œè¯·é‡è¯•")}},ec=async()=>{if(console.log("åˆ›å»ºè§’è‰²æ•°æ®:",X),!X.tenantCode)return void v.toast.error("è¯·è¾“å…¥ç§Ÿæˆ·ä»£ç ");try{let e=await (0,y.fetchWithAuth)(`/admin/tenant/code/${X.tenantCode}`),s=await e.json();if(console.log("ç§Ÿæˆ·æŸ¥è¯¢å“åº”:",s),200!==s.code)return void v.toast.error(s.message||"æŸ¥è¯¢ç§Ÿæˆ·å¤±è´¥");let r=s.data.tenantId,t=await (0,y.fetchWithAuth)("/admin/role/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roleName:X.roleName,roleCode:X.roleCode,description:X.description,tenantId:r,roleStatus:X.roleStatus})});console.log("å“åº”çŠ¶æ€:",t.status);let a=await t.json();console.log("å“åº”æ•°æ®:",a),200===a.code?(I(!1),Y({roleName:"",roleCode:"",description:"",tenantCode:"",roleStatus:"1"}),et(J),v.toast.success("åˆ›å»ºè§’è‰²æˆåŠŸ")):v.toast.error(a.message||"åˆ›å»ºå¤±è´¥")}catch(e){console.error("åˆ›å»ºè§’è‰²å¤±è´¥",e),v.toast.error("åˆ›å»ºå¤±è´¥ï¼Œè¯·é‡è¯•")}},em=e=>{et(e)},ex=H.map(e=>({id:e.role.roleId,name:e.role.roleName,code:e.role.roleCode,description:e.role.description||"",type:0===e.role.tenantId?"system":"custom",userCount:0,permissionCount:e.permissionCount,tenantName:e.tenantName,createdAt:e.role.createTime,originalData:e}));return(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsx)(t.Header,{title:e.dashboard.roles,description:e.dashboard.rolesDescription}),(0,s.jsxs)("div",{className:"flex-1 p-6 space-y-4 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"relative w-80",children:[(0,s.jsx)(x.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,s.jsx)(l.Input,{placeholder:e.dashboard.rolesSearchPlaceholder,value:D,onChange:e=>k(e.target.value),className:"pl-9 bg-card border-border"})]}),(0,s.jsxs)(o.Dialog,{open:T,onOpenChange:I,children:[(0,s.jsx)(o.DialogTrigger,{asChild:!0,children:(0,s.jsxs)(a.Button,{children:[(0,s.jsx)(m.Plus,{className:"w-4 h-4 mr-2"}),e.dashboard.createRole]})}),(0,s.jsxs)(o.DialogContent,{className:"sm:max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,s.jsxs)(o.DialogHeader,{children:[(0,s.jsx)(o.DialogTitle,{children:"æ–°å»ºè§’è‰²"}),(0,s.jsx)(o.DialogDescription,{children:"åˆ›å»ºä¸€ä¸ªæ–°è§’è‰²å¹¶é…ç½®å…¶æƒé™"})]}),(0,s.jsxs)("div",{className:"space-y-6 py-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.Label,{htmlFor:"tenantCode",children:"æ‰€å±žç§Ÿæˆ·"}),(0,s.jsx)(l.Input,{id:"tenantCode",placeholder:"è¾“å…¥ç§Ÿæˆ·ä»£ç ",value:X.tenantCode,onChange:e=>Y({...X,tenantCode:e.target.value}),className:"bg-card border-border"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.Label,{htmlFor:"roleName",children:"è§’è‰²åç§°"}),(0,s.jsx)(l.Input,{id:"roleName",placeholder:"è¾“å…¥è§’è‰²åç§°",value:X.roleName,onChange:e=>Y({...X,roleName:e.target.value}),className:"bg-card border-border"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.Label,{htmlFor:"roleCode",children:"è§’è‰²ä»£ç "}),(0,s.jsx)(l.Input,{id:"roleCode",placeholder:"è¾“å…¥å”¯ä¸€æ ‡è¯†ä»£ç ",value:X.roleCode,onChange:e=>Y({...X,roleCode:e.target.value}),className:"bg-card border-border"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.Label,{htmlFor:"roleStatus",children:"è§’è‰²çŠ¶æ€"}),(0,s.jsxs)(c.Select,{value:X.roleStatus,onValueChange:e=>Y({...X,roleStatus:e}),children:[(0,s.jsx)(c.SelectTrigger,{children:(0,s.jsx)(c.SelectValue,{placeholder:"é€‰æ‹©çŠ¶æ€"})}),(0,s.jsxs)(c.SelectContent,{children:[(0,s.jsx)(c.SelectItem,{value:"1",children:"å¯ç”¨"}),(0,s.jsx)(c.SelectItem,{value:"0",children:"åœç”¨"})]})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.Label,{htmlFor:"roleDesc",children:"è§’è‰²æè¿°"}),(0,s.jsx)(n.Textarea,{id:"roleDesc",placeholder:"æè¿°è§’è‰²çš„èŒè´£å’Œæƒé™èŒƒå›´",value:X.description,onChange:e=>Y({...X,description:e.target.value}),className:"bg-card border-border"})]})]}),(0,s.jsxs)(o.DialogFooter,{children:[(0,s.jsx)(a.Button,{variant:"outline",onClick:()=>{I(!1)},children:"å–æ¶ˆ"}),(0,s.jsx)(a.Button,{onClick:ec,children:"åˆ›å»ºè§’è‰²"})]})]})]})]}),U?(0,s.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):0===H.length?(0,s.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"æš‚æ— è§’è‰²æ•°æ®"}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ex.map(e=>(0,s.jsxs)(b.Card,{className:"bg-card border-border hover:shadow-lg transition-all duration-300",children:[(0,s.jsx)(b.CardHeader,{className:"pb-3",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(b.CardTitle,{className:"text-base",children:e.name}),(0,s.jsx)(b.CardDescription,{className:"text-xs mt-1",children:e.code})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(i.Badge,{className:w[e.type],children:S[e.type]}),(0,s.jsxs)(f.DropdownMenu,{children:[(0,s.jsx)(f.DropdownMenuTrigger,{asChild:!0,children:(0,s.jsx)(a.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,s.jsx)(h.MoreHorizontal,{className:"w-4 h-4"})})}),(0,s.jsxs)(f.DropdownMenuContent,{align:"end",children:[(0,s.jsxs)(f.DropdownMenuItem,{onClick:()=>{P(e.originalData),F(!0)},children:[(0,s.jsx)(g.Shield,{className:"w-4 h-4 mr-2"}),"æŸ¥çœ‹è¯¦æƒ…"]}),(0,s.jsxs)(f.DropdownMenuItem,{onClick:()=>{O(e.originalData),z(!0),el(e.id)},children:[(0,s.jsx)(u.Pencil,{className:"w-4 h-4 mr-2"}),"ç¼–è¾‘"]}),(0,s.jsxs)(f.DropdownMenuItem,{className:"text-destructive",disabled:"system"===e.type,onClick:()=>en(e.id),children:[(0,s.jsx)(p.Trash2,{className:"w-4 h-4 mr-2"}),"åˆ é™¤è§’è‰²"]})]})]})]})]})}),(0,s.jsxs)(b.CardContent,{className:"space-y-3",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-2",children:e.description}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[e.tenantName&&(0,s.jsx)("span",{className:"text-muted-foreground",children:e.tenantName}),(0,s.jsxs)("span",{className:"text-muted-foreground",children:[e.permissionCount," æƒé™é¡¹"]})]})]})]},e.id))}),_>1&&(0,s.jsxs)("div",{className:"flex justify-center items-center gap-2 pt-4",children:[(0,s.jsx)(a.Button,{variant:"outline",size:"sm",onClick:()=>em(J-1),disabled:1===J,children:"ä¸Šä¸€é¡µ"}),(0,s.jsxs)("span",{className:"text-sm text-muted-foreground",children:["ç¬¬ ",J," / ",_," é¡µ"]}),(0,s.jsx)(a.Button,{variant:"outline",size:"sm",onClick:()=>em(J+1),disabled:J===_,children:"ä¸‹ä¸€é¡µ"})]})]}),(0,s.jsx)(o.Dialog,{open:B,onOpenChange:F,children:(0,s.jsxs)(o.DialogContent,{className:"sm:max-w-lg",children:[(0,s.jsxs)(o.DialogHeader,{children:[(0,s.jsx)(o.DialogTitle,{children:"è§’è‰²è¯¦æƒ…"}),(0,s.jsx)(o.DialogDescription,{children:"æŸ¥çœ‹è§’è‰²çš„è¯¦ç»†ä¿¡æ¯"})]}),M&&(0,s.jsxs)("div",{className:"space-y-6 py-4",children:[(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,s.jsx)(g.Shield,{className:"w-6 h-6 text-primary"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h4",{className:"text-lg font-semibold text-foreground",children:M.role.roleName}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:M.role.roleCode})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.Label,{className:"text-muted-foreground",children:"è§’è‰²çŠ¶æ€"}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)(i.Badge,{className:1===M.role.roleStatus?"bg-success/10 text-success":"bg-muted text-muted-foreground",children:1===M.role.roleStatus?"å¯ç”¨":"ç¦ç”¨"})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.Label,{className:"text-muted-foreground",children:"ç§Ÿæˆ· ID"}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("span",{className:"text-foreground font-medium",children:M.role.tenantId})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.Label,{className:"text-muted-foreground",children:"æƒé™æ•°é‡"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(g.Shield,{className:"w-4 h-4 text-muted-foreground"}),(0,s.jsx)("span",{className:"text-foreground font-medium",children:M.permissionCount})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.Label,{className:"text-muted-foreground",children:"åˆ›å»ºæ—¶é—´"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(j.Clock,{className:"w-4 h-4 text-muted-foreground"}),(0,s.jsx)("span",{className:"text-foreground",children:M.role.createTime?new Date(M.role.createTime).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.Label,{className:"text-muted-foreground",children:"æ›´æ–°æ—¶é—´"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(j.Clock,{className:"w-4 h-4 text-muted-foreground"}),(0,s.jsx)("span",{className:"text-foreground",children:M.role.updateTime?new Date(M.role.updateTime).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-"})]})]})]}),M.role.description&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.Label,{className:"text-muted-foreground",children:"è§’è‰²æè¿°"}),(0,s.jsx)("p",{className:"text-sm text-foreground bg-muted/50 p-3 rounded-lg",children:M.role.description})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 pt-2 border-t border-border",children:[(0,s.jsx)(g.Shield,{className:"w-4 h-4 text-muted-foreground"}),(0,s.jsxs)("span",{className:"text-xs text-muted-foreground",children:["è§’è‰² ID: ",M.role.roleId]})]})]}),(0,s.jsx)(o.DialogFooter,{children:(0,s.jsx)(a.Button,{onClick:()=>F(!1),children:"å…³é—­"})})]})}),(0,s.jsx)(o.Dialog,{open:L,onOpenChange:z,children:(0,s.jsxs)(o.DialogContent,{className:"w-[95vw] max-w-5xl max-h-[90vh] overflow-hidden flex flex-col p-0",children:[(0,s.jsxs)(o.DialogHeader,{className:"px-6 pt-6 pb-4 border-b border-border shrink-0",children:[(0,s.jsxs)(o.DialogTitle,{className:"flex items-center gap-2 text-xl",children:[(0,s.jsx)(u.Pencil,{className:"w-5 h-5"}),"ç¼–è¾‘è§’è‰²"]}),(0,s.jsx)(o.DialogDescription,{children:"ä¿®æ”¹è§’è‰²ä¿¡æ¯å’Œæƒé™é…ç½®"})]}),$&&(0,s.jsxs)("div",{className:"flex-1 overflow-hidden flex flex-col",children:[(0,s.jsxs)("div",{className:"px-6 py-4 border-b border-border bg-muted/30 shrink-0",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.Label,{htmlFor:"editRoleName",className:"text-sm font-medium",children:"è§’è‰²åç§°"}),(0,s.jsx)(l.Input,{id:"editRoleName",value:$.role.roleName,onChange:e=>O({...$,role:{...$.role,roleName:e.target.value}}),className:"bg-card border-border h-10"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.Label,{htmlFor:"editRoleCode",className:"text-sm font-medium",children:"è§’è‰²ä»£ç "}),(0,s.jsx)(l.Input,{id:"editRoleCode",value:$.role.roleCode,onChange:e=>O({...$,role:{...$.role,roleCode:e.target.value}}),className:"bg-card border-border h-10"})]})]}),(0,s.jsxs)("div",{className:"space-y-2 mt-4",children:[(0,s.jsx)(d.Label,{htmlFor:"editRoleDesc",className:"text-sm font-medium",children:"è§’è‰²æè¿°"}),(0,s.jsx)(n.Textarea,{id:"editRoleDesc",value:$.role.description||"",onChange:e=>O({...$,role:{...$.role,description:e.target.value}}),placeholder:"æè¿°è§’è‰²çš„èŒè´£å’Œæƒé™èŒƒå›´",className:"bg-card border-border resize-none h-20"})]})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-hidden flex flex-col px-6 py-4 bg-muted/10 min-h-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4 shrink-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 bg-primary/10 rounded-lg",children:(0,s.jsx)(g.Shield,{className:"w-5 h-5 text-primary"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-base font-semibold",children:"æƒé™é…ç½®"}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["å·²é€‰æ‹© ",R.filter(e=>e.selected).length," / ",R.length," ä¸ªæƒé™"]})]})]}),(0,s.jsxs)("div",{className:"relative w-56",children:[(0,s.jsx)(x.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,s.jsx)(l.Input,{placeholder:"æœç´¢æƒé™åç§°æˆ–ä»£ç ...",value:Z,onChange:e=>ee(e.target.value),className:"pl-10 h-9 bg-card border-border"})]})]}),(0,s.jsx)("div",{className:"flex-1 w-full min-h-0 overflow-y-auto",children:(0,s.jsxs)("div",{className:"space-y-6 pr-6",children:[Object.entries(eo).map(([e,r])=>{let t=r.length>0&&r.every(e=>e.selected),a=r.some(e=>e.selected)&&!t;return(0,s.jsxs)("div",{className:"bg-card rounded-xl border shadow-sm overflow-hidden",children:[(0,s.jsx)("div",{className:"flex items-center justify-between px-4 py-3 bg-muted/50 border-b border-border",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("input",{type:"checkbox",ref:e=>{e&&(e.indeterminate=a)},checked:t,onChange:s=>{var r;r=s.target.checked,A(R.map(s=>s.permissionType===e?{...s,selected:r}:s)),es.has(e)||er(s=>new Set(s).add(e))},className:"rounded border-gray-300 w-5 h-5 cursor-pointer"}),(0,s.jsx)(d.Label,{className:"font-medium cursor-pointer flex items-center gap-2",children:(0,s.jsxs)("button",{onClick:()=>{er(s=>{let r=new Set(s);return r.has(e)?r.delete(e):r.add(e),r})},className:"flex items-center gap-1 hover:bg-muted/50 rounded px-1 py-0.5 transition-colors",children:[(0,s.jsx)("span",{className:`${"1"===e?"text-blue-600":"2"===e?"text-green-600":"3"===e?"text-purple-600":"text-gray-600"}`,children:"1"===e?"ðŸ“":"2"===e?"ðŸ”˜":"3"===e?"ðŸŒ":"ðŸ“‹"}),(0,s.jsx)("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium border ${"1"===e?"bg-blue-50 text-blue-700 border-blue-200":"2"===e?"bg-green-50 text-green-700 border-green-200":"3"===e?"bg-purple-50 text-purple-700 border-purple-200":"bg-gray-50 text-gray-700 border-gray-200"}`,children:"1"===e?"èœå•æƒé™":"2"===e?"æŒ‰é’®æƒé™":"3"===e?"æŽ¥å£æƒé™":"å…¶ä»–æƒé™"}),(0,s.jsxs)("span",{className:"text-sm text-muted-foreground",children:["(",r.filter(e=>e.selected).length,"/",r.length,")"]}),(0,s.jsx)(N.ChevronRight,{className:`w-4 h-4 text-muted-foreground transition-transform duration-200 ${es.has(e)?"rotate-90":""}`})]})})]})}),es.has(e)&&(0,s.jsx)("div",{className:"p-4",children:(0,s.jsx)("div",{className:"grid grid-cols-1 gap-3 ml-8",children:r.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-3 py-2 px-3 rounded-lg hover:bg-muted/50 transition-colors",children:[(0,s.jsx)("input",{type:"checkbox",id:`perm-${e.permissionCode}`,checked:e.selected,onChange:s=>{A(R.map(r=>r.permissionCode===e.permissionCode?{...r,selected:s.target.checked}:r))},className:"rounded border-gray-300 w-4 h-4 cursor-pointer"}),(0,s.jsxs)(d.Label,{htmlFor:`perm-${e.permissionCode}`,className:"cursor-pointer flex items-center gap-3 flex-1",children:[(0,s.jsx)("span",{className:"font-medium",children:e.permName}),(0,s.jsx)("code",{className:"text-xs text-muted-foreground bg-muted px-2 py-0.5 rounded",children:e.permissionCode})]})]},e.permissionCode))})})]},e)}),0===Object.keys(eo).length&&(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-muted-foreground",children:[(0,s.jsx)(g.Shield,{className:"w-12 h-12 mb-3 opacity-50"}),(0,s.jsx)("p",{className:"text-sm",children:Z?"æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„æƒé™":"æš‚æ— æƒé™æ•°æ®"})]})]})})]})]}),(0,s.jsxs)(o.DialogFooter,{className:"px-6 py-4 border-t border-border bg-muted/30 shrink-0",children:[(0,s.jsx)(a.Button,{variant:"outline",onClick:()=>{z(!1),ee("")},className:"h-10 px-6",disabled:G,children:"å–æ¶ˆ"}),(0,s.jsx)(a.Button,{onClick:ed,className:"h-10 px-6",disabled:G,children:G?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"ä¿å­˜ä¸­..."]}):"ä¿å­˜æ›´æ”¹"})]})]})})]})}e.s(["default",()=>D])}]);