(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,52078,e=>{"use strict";var t=e.i(43476),l=e.i(71645),a=e.i(13293),r=e.i(67881),s=e.i(23750),n=e.i(94179),i=e.i(70065),o=e.i(30374),c=e.i(10708),d=e.i(84762),u=e.i(27341),m=e.i(48425),h=e.i(96626),x=e.i(30030),p=e.i(20783),f=e.i(30207),v=e.i(86318),j=e.i(34620),b=e.i(70152),g=e.i(81140),N="ScrollArea",[w,T]=(0,x.createContextScope)(N),[y,C]=w(N),E=l.forwardRef((e,a)=>{let{__scopeScrollArea:r,type:s="hover",dir:n,scrollHideDelay:i=600,...o}=e,[c,d]=l.useState(null),[u,h]=l.useState(null),[x,f]=l.useState(null),[j,b]=l.useState(null),[g,N]=l.useState(null),[w,T]=l.useState(0),[C,E]=l.useState(0),[L,D]=l.useState(!1),[S,R]=l.useState(!1),A=(0,p.useComposedRefs)(a,e=>d(e)),I=(0,v.useDirection)(n);return(0,t.jsx)(y,{scope:r,type:s,dir:I,scrollHideDelay:i,scrollArea:c,viewport:u,onViewportChange:h,content:x,onContentChange:f,scrollbarX:j,onScrollbarXChange:b,scrollbarXEnabled:L,onScrollbarXEnabledChange:D,scrollbarY:g,onScrollbarYChange:N,scrollbarYEnabled:S,onScrollbarYEnabledChange:R,onCornerWidthChange:T,onCornerHeightChange:E,children:(0,t.jsx)(m.Primitive.div,{dir:I,...o,ref:A,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":C+"px",...e.style}})})});E.displayName=N;var L="ScrollAreaViewport",D=l.forwardRef((e,a)=>{let{__scopeScrollArea:r,children:s,nonce:n,...i}=e,o=C(L,r),c=l.useRef(null),d=(0,p.useComposedRefs)(a,c,o.onViewportChange);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),(0,t.jsx)(m.Primitive.div,{"data-radix-scroll-area-viewport":"",...i,ref:d,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:(0,t.jsx)("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});D.displayName=L;var S="ScrollAreaScrollbar",R=l.forwardRef((e,a)=>{let{forceMount:r,...s}=e,n=C(S,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=n,c="horizontal"===e.orientation;return l.useEffect(()=>(c?i(!0):o(!0),()=>{c?i(!1):o(!1)}),[c,i,o]),"hover"===n.type?(0,t.jsx)(A,{...s,ref:a,forceMount:r}):"scroll"===n.type?(0,t.jsx)(I,{...s,ref:a,forceMount:r}):"auto"===n.type?(0,t.jsx)(k,{...s,ref:a,forceMount:r}):"always"===n.type?(0,t.jsx)(P,{...s,ref:a}):null});R.displayName=S;var A=l.forwardRef((e,a)=>{let{forceMount:r,...s}=e,n=C(S,e.__scopeScrollArea),[i,o]=l.useState(!1);return l.useEffect(()=>{let e=n.scrollArea,t=0;if(e){let l=()=>{window.clearTimeout(t),o(!0)},a=()=>{t=window.setTimeout(()=>o(!1),n.scrollHideDelay)};return e.addEventListener("pointerenter",l),e.addEventListener("pointerleave",a),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",l),e.removeEventListener("pointerleave",a)}}},[n.scrollArea,n.scrollHideDelay]),(0,t.jsx)(h.Presence,{present:r||i,children:(0,t.jsx)(k,{"data-state":i?"visible":"hidden",...s,ref:a})})}),I=l.forwardRef((e,a)=>{var r;let{forceMount:s,...n}=e,i=C(S,e.__scopeScrollArea),o="horizontal"===e.orientation,c=Z(()=>u("SCROLL_END"),100),[d,u]=(r={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},l.useReducer((e,t)=>r[e][t]??e,"hidden"));return l.useEffect(()=>{if("idle"===d){let e=window.setTimeout(()=>u("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(e)}},[d,i.scrollHideDelay,u]),l.useEffect(()=>{let e=i.viewport,t=o?"scrollLeft":"scrollTop";if(e){let l=e[t],a=()=>{let a=e[t];l!==a&&(u("SCROLL"),c()),l=a};return e.addEventListener("scroll",a),()=>e.removeEventListener("scroll",a)}},[i.viewport,o,u,c]),(0,t.jsx)(h.Presence,{present:s||"hidden"!==d,children:(0,t.jsx)(P,{"data-state":"hidden"===d?"hidden":"visible",...n,ref:a,onPointerEnter:(0,g.composeEventHandlers)(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:(0,g.composeEventHandlers)(e.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),k=l.forwardRef((e,a)=>{let r=C(S,e.__scopeScrollArea),{forceMount:s,...n}=e,[i,o]=l.useState(!1),c="horizontal"===e.orientation,d=Z(()=>{if(r.viewport){let e=r.viewport.offsetWidth<r.viewport.scrollWidth,t=r.viewport.offsetHeight<r.viewport.scrollHeight;o(c?e:t)}},10);return Q(r.viewport,d),Q(r.content,d),(0,t.jsx)(h.Presence,{present:s||i,children:(0,t.jsx)(P,{"data-state":i?"visible":"hidden",...n,ref:a})})}),P=l.forwardRef((e,a)=>{let{orientation:r="vertical",...s}=e,n=C(S,e.__scopeScrollArea),i=l.useRef(null),o=l.useRef(0),[c,d]=l.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=Y(c.viewport,c.content),m={...s,sizes:c,onSizesChange:d,hasThumb:!!(u>0&&u<1),onThumbChange:e=>i.current=e,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:e=>o.current=e};function h(e,t){return function(e,t,l,a="ltr"){let r=q(l),s=t||r/2,n=l.scrollbar.paddingStart+s,i=l.scrollbar.size-l.scrollbar.paddingEnd-(r-s),o=l.content-l.viewport;return G([n,i],"ltr"===a?[0,o]:[-1*o,0])(e)}(e,o.current,c,t)}return"horizontal"===r?(0,t.jsx)(O,{...m,ref:a,onThumbPositionChange:()=>{if(n.viewport&&i.current){let e=K(n.viewport.scrollLeft,c,n.dir);i.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{n.viewport&&(n.viewport.scrollLeft=e)},onDragScroll:e=>{n.viewport&&(n.viewport.scrollLeft=h(e,n.dir))}}):"vertical"===r?(0,t.jsx)(H,{...m,ref:a,onThumbPositionChange:()=>{if(n.viewport&&i.current){let e=K(n.viewport.scrollTop,c);i.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{n.viewport&&(n.viewport.scrollTop=e)},onDragScroll:e=>{n.viewport&&(n.viewport.scrollTop=h(e))}}):null}),O=l.forwardRef((e,a)=>{let{sizes:r,onSizesChange:s,...n}=e,i=C(S,e.__scopeScrollArea),[o,c]=l.useState(),d=l.useRef(null),u=(0,p.useComposedRefs)(a,d,i.onScrollbarXChange);return l.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),(0,t.jsx)(B,{"data-orientation":"horizontal",...n,ref:u,sizes:r,style:{bottom:0,left:"rtl"===i.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===i.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":q(r)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,l)=>{if(i.viewport){var a,r;let s=i.viewport.scrollLeft+t.deltaX;e.onWheelScroll(s),a=s,r=l,a>0&&a<r&&t.preventDefault()}},onResize:()=>{d.current&&i.viewport&&o&&s({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:W(o.paddingLeft),paddingEnd:W(o.paddingRight)}})}})}),H=l.forwardRef((e,a)=>{let{sizes:r,onSizesChange:s,...n}=e,i=C(S,e.__scopeScrollArea),[o,c]=l.useState(),d=l.useRef(null),u=(0,p.useComposedRefs)(a,d,i.onScrollbarYChange);return l.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),(0,t.jsx)(B,{"data-orientation":"vertical",...n,ref:u,sizes:r,style:{top:0,right:"ltr"===i.dir?0:void 0,left:"rtl"===i.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":q(r)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,l)=>{if(i.viewport){var a,r;let s=i.viewport.scrollTop+t.deltaY;e.onWheelScroll(s),a=s,r=l,a>0&&a<r&&t.preventDefault()}},onResize:()=>{d.current&&i.viewport&&o&&s({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:W(o.paddingTop),paddingEnd:W(o.paddingBottom)}})}})}),[$,_]=w(S),B=l.forwardRef((e,a)=>{let{__scopeScrollArea:r,sizes:s,hasThumb:n,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:c,onThumbPositionChange:d,onDragScroll:u,onWheelScroll:h,onResize:x,...v}=e,j=C(S,r),[b,N]=l.useState(null),w=(0,p.useComposedRefs)(a,e=>N(e)),T=l.useRef(null),y=l.useRef(""),E=j.viewport,L=s.content-s.viewport,D=(0,f.useCallbackRef)(h),R=(0,f.useCallbackRef)(d),A=Z(x,10);function I(e){T.current&&u({x:e.clientX-T.current.left,y:e.clientY-T.current.top})}return l.useEffect(()=>{let e=e=>{let t=e.target;b?.contains(t)&&D(e,L)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[E,b,L,D]),l.useEffect(R,[s,R]),Q(b,A),Q(j.content,A),(0,t.jsx)($,{scope:r,scrollbar:b,hasThumb:n,onThumbChange:(0,f.useCallbackRef)(i),onThumbPointerUp:(0,f.useCallbackRef)(o),onThumbPositionChange:R,onThumbPointerDown:(0,f.useCallbackRef)(c),children:(0,t.jsx)(m.Primitive.div,{...v,ref:w,style:{position:"absolute",...v.style},onPointerDown:(0,g.composeEventHandlers)(e.onPointerDown,e=>{0===e.button&&(e.target.setPointerCapture(e.pointerId),T.current=b.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",j.viewport&&(j.viewport.style.scrollBehavior="auto"),I(e))}),onPointerMove:(0,g.composeEventHandlers)(e.onPointerMove,I),onPointerUp:(0,g.composeEventHandlers)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=y.current,j.viewport&&(j.viewport.style.scrollBehavior=""),T.current=null})})})}),M="ScrollAreaThumb",z=l.forwardRef((e,l)=>{let{forceMount:a,...r}=e,s=_(M,e.__scopeScrollArea);return(0,t.jsx)(h.Presence,{present:a||s.hasThumb,children:(0,t.jsx)(U,{ref:l,...r})})}),U=l.forwardRef((e,a)=>{let{__scopeScrollArea:r,style:s,...n}=e,i=C(M,r),o=_(M,r),{onThumbPositionChange:c}=o,d=(0,p.useComposedRefs)(a,e=>o.onThumbChange(e)),u=l.useRef(void 0),h=Z(()=>{u.current&&(u.current(),u.current=void 0)},100);return l.useEffect(()=>{let e=i.viewport;if(e){let t=()=>{h(),u.current||(u.current=J(e,c),c())};return c(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[i.viewport,h,c]),(0,t.jsx)(m.Primitive.div,{"data-state":o.hasThumb?"visible":"hidden",...n,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:(0,g.composeEventHandlers)(e.onPointerDownCapture,e=>{let t=e.target.getBoundingClientRect(),l=e.clientX-t.left,a=e.clientY-t.top;o.onThumbPointerDown({x:l,y:a})}),onPointerUp:(0,g.composeEventHandlers)(e.onPointerUp,o.onThumbPointerUp)})});z.displayName=M;var X="ScrollAreaCorner",F=l.forwardRef((e,l)=>{let a=C(X,e.__scopeScrollArea),r=!!(a.scrollbarX&&a.scrollbarY);return"scroll"!==a.type&&r?(0,t.jsx)(V,{...e,ref:l}):null});F.displayName=X;var V=l.forwardRef((e,a)=>{let{__scopeScrollArea:r,...s}=e,n=C(X,r),[i,o]=l.useState(0),[c,d]=l.useState(0),u=!!(i&&c);return Q(n.scrollbarX,()=>{let e=n.scrollbarX?.offsetHeight||0;n.onCornerHeightChange(e),d(e)}),Q(n.scrollbarY,()=>{let e=n.scrollbarY?.offsetWidth||0;n.onCornerWidthChange(e),o(e)}),u?(0,t.jsx)(m.Primitive.div,{...s,ref:a,style:{width:i,height:c,position:"absolute",right:"ltr"===n.dir?0:void 0,left:"rtl"===n.dir?0:void 0,bottom:0,...e.style}}):null});function W(e){return e?parseInt(e,10):0}function Y(e,t){let l=e/t;return isNaN(l)?0:l}function q(e){let t=Y(e.viewport,e.content),l=e.scrollbar.paddingStart+e.scrollbar.paddingEnd;return Math.max((e.scrollbar.size-l)*t,18)}function K(e,t,l="ltr"){let a=q(t),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-r,n=t.content-t.viewport,i=(0,b.clamp)(e,"ltr"===l?[0,n]:[-1*n,0]);return G([0,n],[0,s-a])(i)}function G(e,t){return l=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let a=(t[1]-t[0])/(e[1]-e[0]);return t[0]+a*(l-e[0])}}var J=(e,t=()=>{})=>{let l={left:e.scrollLeft,top:e.scrollTop},a=0;return!function r(){let s={left:e.scrollLeft,top:e.scrollTop},n=l.left!==s.left,i=l.top!==s.top;(n||i)&&t(),l=s,a=window.requestAnimationFrame(r)}(),()=>window.cancelAnimationFrame(a)};function Z(e,t){let a=(0,f.useCallbackRef)(e),r=l.useRef(0);return l.useEffect(()=>()=>window.clearTimeout(r.current),[]),l.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(a,t)},[a,t])}function Q(e,t){let l=(0,f.useCallbackRef)(t);(0,j.useLayoutEffect)(()=>{let t=0;if(e){let a=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(l)});return a.observe(e),()=>{window.cancelAnimationFrame(t),a.unobserve(e)}}},[e,l])}var ee=e.i(47163);function et({className:e,children:l,...a}){return(0,t.jsxs)(E,{"data-slot":"scroll-area",className:(0,ee.cn)("relative",e),...a,children:[(0,t.jsx)(D,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:l}),(0,t.jsx)(el,{}),(0,t.jsx)(F,{})]})}function el({className:e,orientation:l="vertical",...a}){return(0,t.jsx)(R,{"data-slot":"scroll-area-scrollbar",orientation:l,className:(0,ee.cn)("flex touch-none p-px transition-colors select-none","vertical"===l&&"h-full w-2.5 border-l border-l-transparent","horizontal"===l&&"h-2.5 flex-col border-t border-t-transparent",e),...a,children:(0,t.jsx)(z,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}var ea=e.i(47627),er=e.i(58041),es=e.i(75254);let en=(0,es.default)("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);var ei=e.i(55436),eo=e.i(7233),ec=e.i(86536),ed=e.i(27612);let eu=(0,es.default)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),em=(0,es.default)("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);var eh=e.i(78745),eh=eh,ex=e.i(46696),ep=e.i(38036),ef=e.i(38447),ev=e.i(69340),ej=e.i(99682),eb=e.i(35804),eg="Checkbox",[eN,ew]=(0,x.createContextScope)(eg),[eT,ey]=eN(eg),eC=l.forwardRef((e,a)=>{let{__scopeCheckbox:r,name:s,checked:n,defaultChecked:i,required:o,disabled:c,value:d="on",onCheckedChange:u,form:h,...x}=e,[f,v]=l.useState(null),j=(0,p.useComposedRefs)(a,e=>v(e)),b=l.useRef(!1),N=!f||h||!!f.closest("form"),[w=!1,T]=(0,ev.useControllableState)({prop:n,defaultProp:i,onChange:u}),y=l.useRef(w);return l.useEffect(()=>{let e=f?.form;if(e){let t=()=>T(y.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[f,T]),(0,t.jsxs)(eT,{scope:r,state:w,disabled:c,children:[(0,t.jsx)(m.Primitive.button,{type:"button",role:"checkbox","aria-checked":eS(w)?"mixed":w,"aria-required":o,"data-state":eR(w),"data-disabled":c?"":void 0,disabled:c,value:d,...x,ref:j,onKeyDown:(0,g.composeEventHandlers)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,g.composeEventHandlers)(e.onClick,e=>{T(e=>!!eS(e)||!e),N&&(b.current=e.isPropagationStopped(),b.current||e.stopPropagation())})}),N&&(0,t.jsx)(eD,{control:f,bubbles:!b.current,name:s,value:d,checked:w,required:o,disabled:c,form:h,style:{transform:"translateX(-100%)"},defaultChecked:!eS(i)&&i})]})});eC.displayName=eg;var eE="CheckboxIndicator",eL=l.forwardRef((e,l)=>{let{__scopeCheckbox:a,forceMount:r,...s}=e,n=ey(eE,a);return(0,t.jsx)(h.Presence,{present:r||eS(n.state)||!0===n.state,children:(0,t.jsx)(m.Primitive.span,{"data-state":eR(n.state),"data-disabled":n.disabled?"":void 0,...s,ref:l,style:{pointerEvents:"none",...e.style}})})});eL.displayName=eE;var eD=e=>{let{control:a,checked:r,bubbles:s=!0,defaultChecked:n,...i}=e,o=l.useRef(null),c=(0,ej.usePrevious)(r),d=(0,eb.useSize)(a);l.useEffect(()=>{let e=o.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(c!==r&&t){let l=new Event("click",{bubbles:s});e.indeterminate=eS(r),t.call(e,!eS(r)&&r),e.dispatchEvent(l)}},[c,r,s]);let u=l.useRef(!eS(r)&&r);return(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n??u.current,...i,tabIndex:-1,ref:o,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function eS(e){return"indeterminate"===e}function eR(e){return eS(e)?"indeterminate":e?"checked":"unchecked"}var eA=e.i(78784);function eI({className:e,...l}){return(0,t.jsx)(eC,{"data-slot":"checkbox",className:(0,ee.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...l,children:(0,t.jsx)(eL,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,t.jsx)(eA.CheckIcon,{className:"size-3.5"})})})}var ek=e.i(62870);let eP=[{value:"BIGINT",label:"BIGINT (大整数)"},{value:"INT",label:"INT (整数)"},{value:"SMALLINT",label:"SMALLINT (小整数)"},{value:"TINYINT",label:"TINYINT (微整数)"},{value:"DECIMAL",label:"DECIMAL (小数)"},{value:"FLOAT",label:"FLOAT (浮点数)"},{value:"DOUBLE",label:"DOUBLE (双精度)"},{value:"VARCHAR",label:"VARCHAR (变长字符串)"},{value:"CHAR",label:"CHAR (定长字符串)"},{value:"TEXT",label:"TEXT (长文本)"},{value:"MEDIUMTEXT",label:"MEDIUMTEXT (中等文本)"},{value:"LONGTEXT",label:"LONGTEXT (长文本)"},{value:"DATE",label:"DATE (日期)"},{value:"DATETIME",label:"DATETIME (日期时间)"},{value:"TIMESTAMP",label:"TIMESTAMP (时间戳)"},{value:"TIME",label:"TIME (时间)"},{value:"BOOLEAN",label:"BOOLEAN (布尔值)"},{value:"JSON",label:"JSON (JSON数据)"}];function eO(){let{t:e}=(0,ef.useLanguage)(),[m,h]=(0,l.useState)([]),[x,p]=(0,l.useState)(!0),[f,v]=(0,l.useState)(""),[j,b]=(0,l.useState)(null),[g,N]=(0,l.useState)([]),[w,T]=(0,l.useState)(""),[y,C]=(0,l.useState)(!1),[E,L]=(0,l.useState)(!1),[D,S]=(0,l.useState)(!1),[R,A]=(0,l.useState)(""),[I,k]=(0,l.useState)(null),[P,O]=(0,l.useState)(!1),[H,$]=(0,l.useState)(""),[_,B]=(0,l.useState)(""),[M,z]=(0,l.useState)([]),[U,X]=(0,l.useState)([]),[F,V]=(0,l.useState)(""),[W,Y]=(0,l.useState)(!1),q=async()=>{p(!0);try{let e=await (0,ep.fetchWithAuth)("/admin/database/tables"),t=await e.json();200===t.code&&t.data?h(t.data):ex.toast.error(t.message||"获取表列表失败")}catch(e){console.error("获取表列表失败",e),ex.toast.error("获取表列表失败")}finally{p(!1)}};(0,l.useEffect)(()=>{q()},[]);let K=m.filter(e=>e.tableName.toLowerCase().includes(f.toLowerCase())||e.remarks&&e.remarks.toLowerCase().includes(f.toLowerCase())),G=async e=>{b(e),C(!0);try{let[t,l]=await Promise.all([(0,ep.fetchWithAuth)(`/admin/database/tables/${e}/schema`),(0,ep.fetchWithAuth)(`/admin/database/tables/${e}/ddl`)]),a=await t.json(),r=await l.json();200===a.code&&a.data&&N(a.data),200===r.code&&r.data&&T(r.data)}catch(e){console.error("获取表结构失败",e),ex.toast.error("获取表结构失败")}},J=async()=>{if(!R.trim())return void ex.toast.error("请输入DDL语句");try{let e=await (0,ep.fetchWithAuth)("/admin/database/ddl/preview",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ddl:R})}),t=await e.json();200===t.code&&t.data?(k(t.data),ex.toast.success("DDL语法验证通过")):ex.toast.error(t.message||"DDL语法验证失败")}catch(e){console.error("DDL预览失败",e),ex.toast.error("DDL预览失败")}},Z=async()=>{if(!R.trim())return void ex.toast.error("请输入DDL语句");O(!0),k(null);try{let e=await (0,ep.fetchWithAuth)("/admin/database/ddl",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ddl:R})}),t=await e.json();200===t.code&&t.data?(k(t.data),t.data.success?(ex.toast.success(t.data.message),q()):ex.toast.error(t.data.errorMessage||"DDL执行失败")):ex.toast.error(t.message||"DDL执行失败")}catch(e){console.error("DDL执行失败",e),ex.toast.error("DDL执行失败")}finally{O(!1)}},Q=(e,t,l)=>{z(M.map(a=>a.id===e?{...a,[t]:l}:a))},ee=()=>{if(!H.trim()||0===M.length)return{mainDDL:"",indexDDLs:[]};let e=H.trim(),t=M.map(e=>{let t=`  \`${e.name.trim()}\` ${e.type}`;return e.length&&["VARCHAR","CHAR","DECIMAL","FLOAT","DOUBLE"].includes(e.type)&&(t+=`(${e.length})`),e.primaryKey?(t+=" NOT NULL",e.autoIncrement&&["BIGINT","INT","SMALLINT","TINYINT"].includes(e.type)&&(t+=" AUTO_INCREMENT")):e.nullable||(t+=" NOT NULL"),e.defaultValue&&(t+=` DEFAULT ${e.defaultValue}`),e.comment&&(t+=` COMMENT '${e.comment}'`),t}),l=M.filter(e=>e.primaryKey).map(e=>`\`${e.name.trim()}\``);l.length>0&&t.push(`  PRIMARY KEY (${l.join(", ")})`);let a=`CREATE TABLE \`${e}\` (
${t.join(",\n")}
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;`,r=[];return M.forEach((t,l)=>{if("normal"===t.indexType){let l=`idx_${e}_${t.name.trim()}`,a=`CREATE INDEX \`${l}\` ON \`${e}\` (\`${t.name.trim()}\``;t.indexLength&&(a+=`(${t.indexLength})`),a+=");",r.push(a)}else if("unique"===t.indexType){let l=`uniq_${e}_${t.name.trim()}`,a=`CREATE UNIQUE INDEX \`${l}\` ON \`${e}\` (\`${t.name.trim()}\``;t.indexLength&&(a+=`(${t.indexLength})`),a+=");",r.push(a)}else if("fulltext"===t.indexType){let l=`ft_${e}_${t.name.trim()}`,a=`CREATE FULLTEXT INDEX \`${l}\` ON \`${e}\` (\`${t.name.trim()}\`);`;r.push(a)}}),U.forEach(t=>{let l=t.name.trim()||`comp_${e}_${t.columns.join("_")}`,a="";a=("unique"===t.type?`CREATE UNIQUE INDEX \`${l}\` ON \`${e}\` (`:`CREATE INDEX \`${l}\` ON \`${e}\` (`)+t.columns.map(e=>`\`${e.trim()}\``).join(", ")+");",r.push(a)}),{mainDDL:a,indexDDLs:r}},el=e=>!!e.trim()&&/^[a-zA-Z][a-zA-Z0-9_]*$/.test(e.trim()),es=e=>!!e.trim()&&/^[a-zA-Z][a-zA-Z0-9_]*$/.test(e.trim());(0,l.useEffect)(()=>{let e=ee();V(e.mainDDL+(e.indexDDLs.length>0?"\n\n"+e.indexDDLs.join("\n"):""))},[H,M,U]);let ev=async()=>{if(!el(H))return void ex.toast.error("表名必须以字母开头，只能包含字母、数字和下划线");if(0===M.length)return void ex.toast.error("请至少添加一个字段");for(let e of M)if(!es(e.name))return void ex.toast.error(`字段名"${e.name}"格式不正确，必须以字母开头，只能包含字母、数字和下划线`);let e=ee();if(!e.mainDDL)return void ex.toast.error("DDL生成失败");O(!0),k(null);try{let t=await (0,ep.fetchWithAuth)("/admin/database/ddl",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ddl:e.mainDDL})}),l=await t.json();if(200===l.code&&l.data)if(k(l.data),l.data.success){if(ex.toast.success("表创建成功"),e.indexDDLs.length>0){for(let t of e.indexDDLs)try{let e=await (0,ep.fetchWithAuth)("/admin/database/ddl",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ddl:t})}),l=await e.json();200===l.code&&l.data?.success||console.error("索引创建失败",l.message||l.data?.errorMessage)}catch(e){console.error("索引创建失败",e)}ex.toast.success(`表创建成功，已创建 ${e.indexDDLs.length} 个索引`)}S(!1),ej(),q()}else ex.toast.error(l.data.errorMessage||"DDL执行失败");else ex.toast.error(l.message||"DDL执行失败")}catch(e){console.error("DDL执行失败",e),ex.toast.error("DDL执行失败")}finally{O(!1)}},ej=()=>{$(""),z([]),X([]),V(""),Y(!1)},eb=(e,t,l)=>{X(U.map(a=>a.id===e?{...a,[t]:l}:a))};return(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[(0,t.jsx)(a.Header,{title:"数据库管理",description:"查看和修改数据库表结构"}),(0,t.jsx)("div",{className:"p-6 space-y-6 flex-1 overflow-auto",children:(0,t.jsxs)(u.Tabs,{defaultValue:"tables",className:"w-full",children:[(0,t.jsxs)(u.TabsList,{children:[(0,t.jsxs)(u.TabsTrigger,{value:"tables",className:"flex items-center gap-2",children:[(0,t.jsx)(en,{className:"w-4 h-4"}),"表列表"]}),(0,t.jsxs)(u.TabsTrigger,{value:"ddl",className:"flex items-center gap-2",children:[(0,t.jsx)(em,{className:"w-4 h-4"}),"DDL编辑器"]})]}),(0,t.jsx)(u.TabsContent,{value:"tables",className:"mt-4",children:(0,t.jsxs)(i.Card,{children:[(0,t.jsxs)(i.CardHeader,{children:[(0,t.jsxs)(i.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(er.Database,{className:"w-5 h-5"}),"数据库表列表"]}),(0,t.jsxs)(i.CardDescription,{children:["共 ",K.length," 张表"]})]}),(0,t.jsxs)(i.CardContent,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,t.jsxs)("div",{className:"relative flex-1 max-w-sm",children:[(0,t.jsx)(ei.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,t.jsx)(s.Input,{placeholder:"搜索表名...",value:f,onChange:e=>v(e.target.value),className:"pl-10"})]}),(0,t.jsxs)(r.Button,{onClick:()=>{ej(),S(!0)},className:"gap-2",children:[(0,t.jsx)(eo.Plus,{className:"w-4 h-4"}),"新建表"]})]}),x?(0,t.jsx)("div",{className:"flex items-center justify-center h-32",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):(0,t.jsx)("div",{className:"border rounded-lg",children:(0,t.jsxs)(ea.Table,{children:[(0,t.jsx)(ea.TableHeader,{children:(0,t.jsxs)(ea.TableRow,{children:[(0,t.jsx)(ea.TableHead,{children:"表名"}),(0,t.jsx)(ea.TableHead,{children:"备注"}),(0,t.jsx)(ea.TableHead,{children:"行数"}),(0,t.jsx)(ea.TableHead,{className:"w-32",children:"操作"})]})}),(0,t.jsxs)(ea.TableBody,{children:[K.map(e=>(0,t.jsxs)(ea.TableRow,{children:[(0,t.jsx)(ea.TableCell,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(en,{className:"w-4 h-4 text-muted-foreground"}),(0,t.jsx)("code",{className:"text-sm",children:e.tableName})]})}),(0,t.jsx)(ea.TableCell,{children:e.remarks||"-"}),(0,t.jsx)(ea.TableCell,{children:e.rowCount>=0?(0,t.jsx)(n.Badge,{variant:"secondary",children:e.rowCount.toLocaleString()}):(0,t.jsx)("span",{className:"text-muted-foreground",children:"-"})}),(0,t.jsx)(ea.TableCell,{children:(0,t.jsx)("div",{className:"flex items-center gap-1",children:(0,t.jsx)(r.Button,{variant:"ghost",size:"icon",className:"w-8 h-8",onClick:()=>G(e.tableName),title:"查看结构",children:(0,t.jsx)(ec.Eye,{className:"w-4 h-4"})})})})]},e.tableName)),0===K.length&&(0,t.jsx)(ea.TableRow,{children:(0,t.jsx)(ea.TableCell,{colSpan:4,className:"text-center py-8 text-muted-foreground",children:"没有找到匹配的表"})})]})]})})]})]})}),(0,t.jsx)(u.TabsContent,{value:"ddl",className:"mt-4",children:(0,t.jsxs)(i.Card,{children:[(0,t.jsxs)(i.CardHeader,{children:[(0,t.jsxs)(i.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(em,{className:"w-5 h-5"}),"DDL编辑器"]}),(0,t.jsx)(i.CardDescription,{children:"执行DDL语句（CREATE TABLE, ALTER TABLE, DROP TABLE）"})]}),(0,t.jsx)(i.CardContent,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{children:"DDL语句"}),(0,t.jsx)(d.Textarea,{value:R,onChange:e=>A(e.target.value),placeholder:"输入DDL语句... 例如： CREATE TABLE test_table ( id BIGINT PRIMARY KEY AUTO_INCREMENT, name VARCHAR(64) NOT NULL, status INT DEFAULT 1 );",className:"font-mono h-48"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(r.Button,{variant:"outline",onClick:J,disabled:!R.trim(),className:"gap-2",children:[(0,t.jsx)(ec.Eye,{className:"w-4 h-4"}),"预览"]}),(0,t.jsx)(r.Button,{onClick:Z,disabled:!R.trim()||P,className:"gap-2",children:P?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"执行中..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eu,{className:"w-4 h-4"}),"执行DDL"]})})]}),I&&(0,t.jsxs)("div",{className:`p-4 rounded-lg border ${I.success?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[I.success?(0,t.jsx)(n.Badge,{className:"bg-green-100 text-green-700 border-green-300",children:"执行成功"}):(0,t.jsx)(n.Badge,{variant:"destructive",children:"执行失败"}),(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:["耗时: ",I.executionTime,"ms"]})]}),I.success?(0,t.jsx)("p",{className:"text-sm",children:I.message}):(0,t.jsx)("p",{className:"text-sm text-red-600",children:I.errorMessage})]})]})})]})})]})}),(0,t.jsx)(o.Dialog,{open:y,onOpenChange:C,children:(0,t.jsxs)(o.DialogContent,{className:"w-[98vw] sm:max-w-none max-h-[90vh] overflow-hidden flex flex-col p-6",children:[(0,t.jsxs)(o.DialogHeader,{className:"pb-4",children:[(0,t.jsxs)(o.DialogTitle,{className:"flex items-center gap-2 text-xl",children:[(0,t.jsx)(ec.Eye,{className:"w-5 h-5"}),"表结构 - ",j]}),(0,t.jsx)(o.DialogDescription,{className:"text-base",children:"查看表的列信息和DDL语句"})]}),(0,t.jsx)("div",{className:"flex-1 overflow-hidden flex flex-col min-h-0",children:(0,t.jsxs)(u.Tabs,{defaultValue:"columns",className:"flex-1 flex flex-col min-h-0",children:[(0,t.jsxs)(u.TabsList,{className:"shrink-0 h-10",children:[(0,t.jsx)(u.TabsTrigger,{value:"columns",className:"px-6",children:"列信息"}),(0,t.jsx)(u.TabsTrigger,{value:"ddl",className:"px-6",children:"DDL语句"})]}),(0,t.jsx)(u.TabsContent,{value:"columns",className:"flex-1 overflow-hidden mt-4 min-h-0",children:(0,t.jsx)(et,{className:"h-[600px] pr-4",children:(0,t.jsx)("div",{className:"border rounded-lg",children:(0,t.jsxs)(ea.Table,{children:[(0,t.jsx)(ea.TableHeader,{children:(0,t.jsxs)(ea.TableRow,{children:[(0,t.jsx)(ea.TableHead,{className:"w-16 py-3",children:"#"}),(0,t.jsx)(ea.TableHead,{className:"py-3",children:"列名"}),(0,t.jsx)(ea.TableHead,{className:"py-3",children:"类型"}),(0,t.jsx)(ea.TableHead,{className:"py-3",children:"可空"}),(0,t.jsx)(ea.TableHead,{className:"py-3",children:"默认值"}),(0,t.jsx)(ea.TableHead,{className:"py-3",children:"主键"})]})}),(0,t.jsx)(ea.TableBody,{children:g.map(e=>(0,t.jsxs)(ea.TableRow,{className:"hover:bg-muted/50",children:[(0,t.jsx)(ea.TableCell,{className:"text-muted-foreground py-3",children:e.ordinalPosition}),(0,t.jsx)(ea.TableCell,{className:"py-3",children:(0,t.jsx)("code",{className:"text-sm font-medium",children:e.columnName})}),(0,t.jsx)(ea.TableCell,{className:"py-3",children:(0,t.jsxs)("code",{className:"text-sm text-muted-foreground",children:[e.typeName,e.columnSize>0&&`(${e.columnSize})`]})}),(0,t.jsx)(ea.TableCell,{className:"py-3",children:(0,t.jsx)(n.Badge,{variant:e.nullable?"secondary":"outline",className:"px-3 py-1",children:e.nullable?"是":"否"})}),(0,t.jsx)(ea.TableCell,{className:"py-3",children:(0,t.jsx)("code",{className:"text-sm",children:e.columnDef||"-"})}),(0,t.jsx)(ea.TableCell,{className:"py-3",children:e.primaryKey&&(0,t.jsx)(n.Badge,{className:"bg-yellow-100 text-yellow-700 border-yellow-300 px-3 py-1",children:"PK"})})]},e.columnName))})]})})})}),(0,t.jsx)(u.TabsContent,{value:"ddl",className:"flex-1 overflow-hidden mt-4 min-h-0",children:(0,t.jsx)(et,{className:"h-[600px] pr-4",children:(0,t.jsx)("pre",{className:"p-6 bg-muted rounded-lg text-sm font-mono whitespace-pre-wrap leading-relaxed",children:w||"无数据"})})})]})}),(0,t.jsx)(o.DialogFooter,{className:"pt-4",children:(0,t.jsx)(r.Button,{variant:"outline",onClick:()=>C(!1),className:"px-6",children:"关闭"})})]})}),(0,t.jsx)(o.Dialog,{open:D,onOpenChange:S,children:(0,t.jsxs)(o.DialogContent,{className:"w-[98vw] sm:max-w-none max-h-[90vh] overflow-hidden flex flex-col p-6",children:[(0,t.jsxs)(o.DialogHeader,{className:"pb-4",children:[(0,t.jsxs)(o.DialogTitle,{className:"flex items-center gap-2 text-xl",children:[(0,t.jsx)(eo.Plus,{className:"w-5 h-5"}),"新建表"]}),(0,t.jsx)(o.DialogDescription,{className:"text-base",children:"通过可视化界面创建新的数据表，无需编写SQL语句"})]}),(0,t.jsx)("div",{className:"flex-1 overflow-hidden flex flex-col min-h-0",children:(0,t.jsxs)("div",{className:"space-y-4 overflow-auto flex-1 min-h-0 pr-2",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(c.Label,{htmlFor:"tableName",className:"text-sm font-medium",children:["表名 ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(s.Input,{id:"tableName",value:H,onChange:e=>$(e.target.value),placeholder:"请输入表名，例如：user_info",className:el(H)?"border-green-500":"border-red-500"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"表名必须以字母开头，只能包含字母、数字和下划线"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(c.Label,{className:"text-sm font-medium",children:["字段列表 ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)(r.Button,{onClick:()=>{z([...M,{id:Date.now().toString(),name:"",type:"VARCHAR",length:"255",nullable:!0,primaryKey:!1,autoIncrement:!1,unique:!1,defaultValue:"",comment:"",indexType:"none",indexLength:""}])},size:"sm",className:"gap-2",children:[(0,t.jsx)(eo.Plus,{className:"w-4 h-4"}),"添加字段"]})]}),0===M.length?(0,t.jsxs)("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[(0,t.jsx)(en,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-2",children:"还没有添加字段"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:'点击上方"添加字段"按钮开始创建表结构'})]}):(0,t.jsx)(et,{className:"h-[500px] pr-4",children:(0,t.jsx)("div",{className:"space-y-4",children:M.map((e,l)=>(0,t.jsx)(i.Card,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-start gap-6 flex-wrap",children:[(0,t.jsxs)("div",{className:"flex-shrink-0 w-48 space-y-2",children:[(0,t.jsx)(c.Label,{className:"text-sm font-medium",children:"字段名"}),(0,t.jsx)(s.Input,{value:e.name,onChange:t=>Q(e.id,"name",t.target.value),placeholder:"字段名",className:e.name&&es(e.name)?"border-green-500":""})]}),(0,t.jsxs)("div",{className:"flex-shrink-0 w-48 space-y-2",children:[(0,t.jsx)(c.Label,{className:"text-sm font-medium",children:"类型"}),(0,t.jsxs)(ek.Select,{value:e.type,onValueChange:t=>Q(e.id,"type",t),children:[(0,t.jsx)(ek.SelectTrigger,{children:(0,t.jsx)(ek.SelectValue,{})}),(0,t.jsx)(ek.SelectContent,{children:eP.map(e=>(0,t.jsx)(ek.SelectItem,{value:e.value,children:e.label},e.value))})]})]}),["VARCHAR","CHAR","DECIMAL","FLOAT","DOUBLE"].includes(e.type)&&(0,t.jsxs)("div",{className:"flex-shrink-0 w-32 space-y-2",children:[(0,t.jsx)(c.Label,{className:"text-sm font-medium",children:"长度"}),(0,t.jsx)(s.Input,{value:e.length,onChange:t=>Q(e.id,"length",t.target.value),placeholder:"255",type:"number"})]}),(0,t.jsxs)("div",{className:"flex-shrink-0 space-y-3",children:[(0,t.jsx)(c.Label,{className:"text-sm font-medium",children:"约束条件"}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(eI,{id:`pk-${e.id}`,checked:e.primaryKey,onCheckedChange:t=>Q(e.id,"primaryKey",t)}),(0,t.jsx)("label",{htmlFor:`pk-${e.id}`,className:"text-sm cursor-pointer",children:"主键"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(eI,{id:`notnull-${e.id}`,checked:!e.nullable,onCheckedChange:t=>Q(e.id,"nullable",!t)}),(0,t.jsx)("label",{htmlFor:`notnull-${e.id}`,className:"text-sm cursor-pointer",children:"非空"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(eI,{id:`unique-${e.id}`,checked:e.unique,onCheckedChange:t=>Q(e.id,"unique",t)}),(0,t.jsx)("label",{htmlFor:`unique-${e.id}`,className:"text-sm cursor-pointer",children:"唯一"})]}),["BIGINT","INT","SMALLINT","TINYINT"].includes(e.type)&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(eI,{id:`autoinc-${e.id}`,checked:e.autoIncrement,onCheckedChange:t=>Q(e.id,"autoIncrement",t)}),(0,t.jsx)("label",{htmlFor:`autoinc-${e.id}`,className:"text-sm cursor-pointer",children:"自增"})]})]})]}),(0,t.jsxs)("div",{className:"flex-shrink-0 w-40 space-y-2",children:[(0,t.jsx)(c.Label,{className:"text-sm font-medium",children:"默认值"}),(0,t.jsx)(s.Input,{value:e.defaultValue,onChange:t=>Q(e.id,"defaultValue",t.target.value),placeholder:"默认值"})]}),(0,t.jsxs)("div",{className:"flex-shrink-0 w-64 space-y-2",children:[(0,t.jsx)(c.Label,{className:"text-sm font-medium",children:"注释"}),(0,t.jsx)(s.Input,{value:e.comment,onChange:t=>Q(e.id,"comment",t.target.value),placeholder:"字段说明"})]}),(0,t.jsxs)("div",{className:"flex-shrink-0 w-48 space-y-2",children:[(0,t.jsx)(c.Label,{className:"text-sm font-medium",children:"索引类型"}),(0,t.jsxs)(ek.Select,{value:e.indexType,onValueChange:t=>Q(e.id,"indexType",t),children:[(0,t.jsx)(ek.SelectTrigger,{children:(0,t.jsx)(ek.SelectValue,{})}),(0,t.jsxs)(ek.SelectContent,{children:[(0,t.jsx)(ek.SelectItem,{value:"none",children:"无索引"}),(0,t.jsx)(ek.SelectItem,{value:"normal",children:"普通索引"}),(0,t.jsx)(ek.SelectItem,{value:"unique",children:"唯一索引"}),["VARCHAR","CHAR","TEXT","MEDIUMTEXT","LONGTEXT"].includes(e.type)&&(0,t.jsx)(ek.SelectItem,{value:"fulltext",children:"全文索引"})]})]})]}),"none"!==e.indexType&&"fulltext"!==e.indexType&&(0,t.jsxs)("div",{className:"flex-shrink-0 w-32 space-y-2",children:[(0,t.jsx)(c.Label,{className:"text-sm font-medium",children:"索引长度"}),(0,t.jsx)(s.Input,{value:e.indexLength,onChange:t=>Q(e.id,"indexLength",t.target.value),placeholder:"10",type:"number"})]}),(0,t.jsx)("div",{className:"flex-shrink-0 pt-6",children:(0,t.jsx)(r.Button,{variant:"destructive",size:"sm",onClick:()=>{var t;return t=e.id,void z(M.filter(e=>e.id!==t))},children:(0,t.jsx)(ed.Trash2,{className:"w-4 h-4"})})})]})},e.id))})})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(c.Label,{className:"text-sm font-medium",children:"联合索引"}),(0,t.jsxs)(r.Button,{onClick:()=>{X([...U,{id:Date.now().toString(),name:"",columns:[],type:"normal",comment:""}])},size:"sm",className:"gap-2",children:[(0,t.jsx)(eo.Plus,{className:"w-4 h-4"}),"添加联合索引"]})]}),0===U.length?(0,t.jsxs)("div",{className:"text-center py-8 border-2 border-dashed rounded-lg",children:[(0,t.jsx)("p",{className:"text-muted-foreground mb-2",children:"还没有添加联合索引"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"联合索引可以包含多个字段，提高查询性能"})]}):(0,t.jsx)("div",{className:"space-y-3",children:U.map(e=>(0,t.jsx)(i.Card,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-start gap-4 flex-wrap",children:[(0,t.jsxs)("div",{className:"flex-shrink-0 w-48 space-y-2",children:[(0,t.jsx)(c.Label,{className:"text-sm font-medium",children:"索引名称"}),(0,t.jsx)(s.Input,{value:e.name,onChange:t=>eb(e.id,"name",t.target.value),placeholder:"留空自动生成"})]}),(0,t.jsxs)("div",{className:"flex-shrink-0 w-40 space-y-2",children:[(0,t.jsx)(c.Label,{className:"text-sm font-medium",children:"索引类型"}),(0,t.jsxs)(ek.Select,{value:e.type,onValueChange:t=>eb(e.id,"type",t),children:[(0,t.jsx)(ek.SelectTrigger,{children:(0,t.jsx)(ek.SelectValue,{})}),(0,t.jsxs)(ek.SelectContent,{children:[(0,t.jsx)(ek.SelectItem,{value:"normal",children:"普通索引"}),(0,t.jsx)(ek.SelectItem,{value:"unique",children:"唯一索引"})]})]})]}),(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,t.jsx)(c.Label,{className:"text-sm font-medium",children:"包含字段"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:M.map(l=>(0,t.jsxs)(r.Button,{variant:e.columns.includes(l.name)?"default":"outline",size:"sm",onClick:()=>{var t,a;return t=e.id,a=l.name,void X(U.map(e=>{if(e.id===t){let t=e.columns.includes(a)?e.columns.filter(e=>e!==a):[...e.columns,a];return{...e,columns:t}}return e}))},children:[l.name||"未命名",e.columns.includes(l.name)&&(0,t.jsx)(eh.default,{className:"w-3 h-3 ml-1"})]},l.id))})]}),(0,t.jsx)("div",{className:"flex-shrink-0 pt-6",children:(0,t.jsx)(r.Button,{variant:"destructive",size:"sm",onClick:()=>{var t;return t=e.id,void X(U.filter(e=>e.id!==t))},children:(0,t.jsx)(ed.Trash2,{className:"w-4 h-4"})})})]})},e.id))})]}),F&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(c.Label,{className:"text-sm font-medium flex items-center gap-2",children:[(0,t.jsx)(em,{className:"w-4 h-4"}),"DDL预览"]}),(0,t.jsx)("div",{className:"bg-muted rounded-lg p-4",children:(0,t.jsx)("pre",{className:"text-sm font-mono whitespace-pre-wrap overflow-auto max-h-[200px]",children:F})})]})]})}),(0,t.jsxs)(o.DialogFooter,{className:"pt-4",children:[(0,t.jsx)(r.Button,{variant:"outline",onClick:()=>S(!1),className:"px-6",disabled:P,children:"取消"}),(0,t.jsx)(r.Button,{onClick:ev,disabled:!el(H)||0===M.length||P,className:"px-6",children:P?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"创建中..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eh.default,{className:"w-4 h-4 mr-2"}),"创建表"]})}),!el(H)&&(0,t.jsx)("p",{className:"text-sm text-red-500",children:"表名格式不正确"}),0===M.length&&(0,t.jsx)("p",{className:"text-sm text-red-500",children:"请至少添加一个字段"})]})]})})]})}function eH(){return(0,t.jsx)(eO,{})}e.s(["default",()=>eH],52078)}]);