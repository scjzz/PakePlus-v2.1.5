(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3116,e=>{"use strict";let t=(0,e.i(75254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],3116)},41071,e=>{"use strict";let t=(0,e.i(75254).default)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);e.s(["MoreHorizontal",()=>t],41071)},88699,e=>{"use strict";let t=(0,e.i(75254).default)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);e.s(["Pencil",()=>t],88699)},86536,e=>{"use strict";let t=(0,e.i(75254).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],86536)},47627,e=>{"use strict";var t=e.i(43476),a=e.i(47163);function s({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,t.jsx)("table",{"data-slot":"table",className:(0,a.cn)("w-full caption-bottom text-sm",e),...s})})}function n({className:e,...s}){return(0,t.jsx)("thead",{"data-slot":"table-header",className:(0,a.cn)("[&_tr]:border-b",e),...s})}function r({className:e,...s}){return(0,t.jsx)("tbody",{"data-slot":"table-body",className:(0,a.cn)("[&_tr:last-child]:border-0",e),...s})}function l({className:e,...s}){return(0,t.jsx)("tr",{"data-slot":"table-row",className:(0,a.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...s})}function i({className:e,...s}){return(0,t.jsx)("th",{"data-slot":"table-head",className:(0,a.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...s})}function d({className:e,...s}){return(0,t.jsx)("td",{"data-slot":"table-cell",className:(0,a.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...s})}e.s(["Table",()=>s,"TableBody",()=>r,"TableCell",()=>d,"TableHead",()=>i,"TableHeader",()=>n,"TableRow",()=>l])},8623,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(47627),n=e.i(67881),r=e.i(23750),l=e.i(73375),i=e.i(63059);function d({data:e,columns:d,page:c=1,totalPages:o=1,onPageChange:m,loading:u=!1}){let[h,x]=a.useState(c.toString());return a.useEffect(()=>{x(c.toString())},[c]),(0,t.jsxs)("div",{className:"bg-card border border-border rounded-xl overflow-hidden",children:[(0,t.jsxs)(s.Table,{children:[(0,t.jsx)(s.TableHeader,{children:(0,t.jsx)(s.TableRow,{className:"border-border hover:bg-transparent",children:d.map(e=>(0,t.jsx)(s.TableHead,{className:"text-muted-foreground font-medium",children:e.header},String(e.key)))})}),(0,t.jsx)(s.TableBody,{children:u?(0,t.jsx)(s.TableRow,{children:(0,t.jsx)(s.TableCell,{colSpan:d.length,className:"text-center py-8",children:(0,t.jsx)("div",{className:"flex items-center justify-center",children:(0,t.jsx)("div",{className:"h-6 w-6 animate-spin rounded-full border-2 border-primary border-t-transparent"})})})}):0===e.length?(0,t.jsx)(s.TableRow,{children:(0,t.jsx)(s.TableCell,{colSpan:d.length,className:"text-center py-8 text-muted-foreground",children:"暂无数据"})}):e.map(e=>(0,t.jsx)(s.TableRow,{className:"border-border hover:bg-muted/50",children:d.map(a=>(0,t.jsx)(s.TableCell,{children:a.render?a.render(e):String(e[a.key]??"")},String(a.key)))},e.id))})]}),o>1&&(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-t border-border",children:[(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["共 ",o," 页"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(n.Button,{variant:"outline",size:"sm",onClick:()=>m?.(c-1),disabled:c<=1,children:(0,t.jsx)(l.ChevronLeft,{className:"w-4 h-4"})}),(0,t.jsx)(r.Input,{type:"number",min:1,max:o,value:h,onChange:e=>{let t=e.target.value;x(t);let a=parseInt(t);a>=1&&a<=o&&m?.(a)},onBlur:()=>{let e=parseInt(h);isNaN(e)||e<1?e=1:e>o&&(e=o),x(e.toString()),m?.(e)},className:"w-16 h-8 text-center"}),(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:["/ ",o]}),(0,t.jsx)(n.Button,{variant:"outline",size:"sm",onClick:()=>m?.(c+1),disabled:c>=o,children:(0,t.jsx)(i.ChevronRight,{className:"w-4 h-4"})})]})]})]})}e.s(["DataTable",()=>d])},41611,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(13293),n=e.i(8623),r=e.i(67881),l=e.i(23750),i=e.i(94179),d=e.i(30374),c=e.i(10708),o=e.i(62870),m=e.i(7233),u=e.i(55436),h=e.i(41071),x=e.i(88699),g=e.i(27612),j=e.i(86536),p=e.i(7486),b=e.i(61911),N=e.i(3116),f=e.i(98919),v=e.i(63415),y=e.i(46696),C=e.i(38036),S=e.i(38447);let w={active:"bg-success/10 text-success",inactive:"bg-muted text-muted-foreground",suspended:"bg-destructive/10 text-destructive"},T={active:"已激活",inactive:"未激活",suspended:"已停用"};function D(){let{t:e}=(0,S.useLanguage)(),[D,k]=(0,a.useState)(""),[I,L]=(0,a.useState)(!1),[B,E]=(0,a.useState)(!1),[z,P]=(0,a.useState)(!1),[F,A]=(0,a.useState)(null),[M,R]=(0,a.useState)(null),[H,O]=(0,a.useState)({tenantName:"",tenantCode:"",description:"",status:"1",adminEmail:""}),[$,U]=(0,a.useState)([]),[W,V]=(0,a.useState)(!0),[K,_]=(0,a.useState)(1),[J]=(0,a.useState)(10),[q,G]=(0,a.useState)(0),[Q,X]=(0,a.useState)(!1),Y=async(e=K)=>{V(!0);try{let t=await (0,C.fetchWithAuth)(`/admin/tenant/info?page=${e}&size=${J}`),a=await t.json();if(200===a.code&&a.data){let t=a.data;U(t.records||[]),G(Math.ceil(t.total/J)),_(e)}}catch(e){console.error("获取租户列表失败",e)}finally{V(!1)}};(0,a.useEffect)(()=>{let e=setTimeout(()=>{D.trim()?Z(D):Y(1)},500);return()=>clearTimeout(e)},[D]);let Z=async e=>{V(!0);try{let t=await (0,C.fetchWithAuth)(`/admin/tenants/search?tenantName=${encodeURIComponent(e)}`),a=await t.json();200===a.code&&a.data&&(U(a.data),G(1))}catch(e){console.error("搜索租户失败",e)}finally{V(!1)}},ee=async()=>{console.log("创建租户数据:",H);try{let e=await (0,C.fetchWithAuth)("/admin/tenant/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tenantName:H.tenantName,tenantCode:H.tenantCode,description:H.description,status:H.status,adminEmail:H.adminEmail})});console.log("响应状态:",e.status);let t=await e.json();console.log("响应数据:",t),200===t.code?(L(!1),O({tenantName:"",tenantCode:"",description:"",status:"1",adminEmail:""}),Y(K),y.toast.success("创建租户成功")):y.toast.error(t.message||"创建失败")}catch(e){console.error("创建租户失败",e),y.toast.error("创建失败，请重试")}},et=async()=>{if(M){console.log("更新租户数据:",M),X(!0);try{let e=new URLSearchParams({tenantId:M.tenant.tenantId.toString(),tenantName:M.tenant.tenantName,description:M.tenant.description||"",status:M.tenant.tenantStatus.toString()});console.log("请求URL:",`/admin/tenant/update?${e.toString()}`);let t=await (0,C.fetchWithAuth)(`/admin/tenant/update?${e.toString()}`,{method:"POST"});console.log("响应状态:",t.status);let a=await t.json();console.log("响应数据:",a),200===a.code?(E(!1),Y(K),y.toast.success("更新租户成功")):y.toast.error(a.message||"更新失败")}catch(e){console.error("更新租户失败",e),y.toast.error("更新失败，请重试")}finally{X(!1)}}},ea=async e=>{if(confirm(`确定要删除租户"${e.name}"吗？此操作不可恢复！`))try{console.log("删除租户ID:",e.id);let t=await (0,C.fetchWithAuth)(`/admin/tenant/${e.id}/delete`,{method:"POST"});console.log("响应状态:",t.status);let a=await t.json();console.log("响应数据:",a),200===a.code?(y.toast.success("删除成功"),Y(K)):y.toast.error(a.message||"删除失败")}catch(e){console.error("删除租户失败",e),y.toast.error("删除失败，请重试")}},es=[{key:"name",header:"租户名称",render:e=>(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-foreground",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:e.code})]})},{key:"status",header:"状态",render:e=>(0,t.jsx)(i.Badge,{className:w[e.status],children:T[e.status]})},{key:"userCount",header:"用户数",render:e=>(0,t.jsx)("span",{className:"text-foreground",children:e.userCount})},{key:"createdAt",header:"创建日期",render:e=>(0,t.jsx)("span",{className:"text-muted-foreground",children:e.createdAt?new Date(e.createdAt).toLocaleDateString("zh-CN"):"-"})},{key:"actions",header:"操作",render:e=>(0,t.jsxs)(v.DropdownMenu,{children:[(0,t.jsx)(v.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(r.Button,{variant:"ghost",size:"icon",children:(0,t.jsx)(h.MoreHorizontal,{className:"w-4 h-4"})})}),(0,t.jsxs)(v.DropdownMenuContent,{align:"end",children:[(0,t.jsxs)(v.DropdownMenuItem,{onClick:()=>{A(e.originalData),P(!0)},children:[(0,t.jsx)(j.Eye,{className:"w-4 h-4 mr-2"}),"查看详情"]}),(0,t.jsxs)(v.DropdownMenuItem,{onClick:()=>{R(e.originalData),E(!0)},children:[(0,t.jsx)(x.Pencil,{className:"w-4 h-4 mr-2"}),"编辑"]}),(0,t.jsxs)(v.DropdownMenuItem,{className:"text-destructive",onClick:()=>ea(e),children:[(0,t.jsx)(g.Trash2,{className:"w-4 h-4 mr-2"}),"删除"]})]})]})}],en=$.map(e=>({id:e.tenant.tenantId,name:e.tenant.tenantName,code:e.tenant.tenantCode,status:1===e.tenant.tenantStatus?"active":0===e.tenant.tenantStatus?"inactive":"suspended",userCount:e.userCount,createdAt:e.tenant.createTime||"",originalData:e}));return(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[(0,t.jsx)(s.Header,{title:e.dashboard.tenants,description:e.dashboard.tenantsDescription}),(0,t.jsxs)("div",{className:"flex-1 p-6 space-y-4 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"relative w-80",children:[(0,t.jsx)(u.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,t.jsx)(l.Input,{placeholder:e.dashboard.tenantsSearchPlaceholder,value:D,onChange:e=>k(e.target.value),className:"pl-9 bg-card border-border"})]}),(0,t.jsxs)(d.Dialog,{open:I,onOpenChange:L,children:[(0,t.jsx)(d.DialogTrigger,{asChild:!0,children:(0,t.jsxs)(r.Button,{children:[(0,t.jsx)(m.Plus,{className:"w-4 h-4 mr-2"}),e.dashboard.createTenant]})}),(0,t.jsxs)(d.DialogContent,{className:"sm:max-w-md",children:[(0,t.jsxs)(d.DialogHeader,{children:[(0,t.jsx)(d.DialogTitle,{children:"新建租户"}),(0,t.jsx)(d.DialogDescription,{children:"创建一个新的租户账户"})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"tenantName",children:"租户名称"}),(0,t.jsx)(l.Input,{id:"tenantName",placeholder:"输入租户名称",value:H.tenantName,onChange:e=>O({...H,tenantName:e.target.value}),className:"bg-card border-border"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"tenantCode",children:"租户代码"}),(0,t.jsx)(l.Input,{id:"tenantCode",placeholder:"输入唯一标识代码",value:H.tenantCode,onChange:e=>O({...H,tenantCode:e.target.value}),className:"bg-card border-border"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"description",children:"描述"}),(0,t.jsx)(l.Input,{id:"description",placeholder:"描述租户的用途",value:H.description,onChange:e=>O({...H,description:e.target.value}),className:"bg-card border-border"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"status",children:"状态"}),(0,t.jsxs)(o.Select,{value:H.status,onValueChange:e=>O({...H,status:e}),children:[(0,t.jsx)(o.SelectTrigger,{children:(0,t.jsx)(o.SelectValue,{placeholder:"选择状态"})}),(0,t.jsxs)(o.SelectContent,{children:[(0,t.jsx)(o.SelectItem,{value:"1",children:"启用"}),(0,t.jsx)(o.SelectItem,{value:"0",children:"停用"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"adminEmail",children:"管理员邮箱"}),(0,t.jsx)(l.Input,{id:"adminEmail",type:"email",placeholder:"admin@example.com",value:H.adminEmail,onChange:e=>O({...H,adminEmail:e.target.value}),className:"bg-card border-border"})]})]}),(0,t.jsxs)(d.DialogFooter,{children:[(0,t.jsx)(r.Button,{variant:"outline",onClick:()=>{L(!1),O({tenantName:"",tenantCode:"",description:"",status:"1",adminEmail:""})},children:"取消"}),(0,t.jsx)(r.Button,{onClick:ee,children:"创建"})]})]})]})]}),(0,t.jsx)(n.DataTable,{data:en,columns:es,page:K,totalPages:q,onPageChange:e=>{Y(e)},loading:W})]}),(0,t.jsx)(d.Dialog,{open:z,onOpenChange:P,children:(0,t.jsxs)(d.DialogContent,{className:"sm:max-w-lg",children:[(0,t.jsxs)(d.DialogHeader,{children:[(0,t.jsx)(d.DialogTitle,{children:"租户详情"}),(0,t.jsx)(d.DialogDescription,{children:"查看租户的详细信息"})]}),F&&(0,t.jsxs)("div",{className:"space-y-6 py-4",children:[(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,t.jsx)(p.Building2,{className:"w-6 h-6 text-primary"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h4",{className:"text-lg font-semibold text-foreground",children:F.tenant.tenantName}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:F.tenant.tenantCode})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{className:"text-muted-foreground",children:"租户状态"}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(i.Badge,{className:w[1===F.tenant.tenantStatus?"active":0===F.tenant.tenantStatus?"inactive":"suspended"],children:1===F.tenant.tenantStatus?T.active:0===F.tenant.tenantStatus?T.inactive:T.suspended})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{className:"text-muted-foreground",children:"用户数量"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(b.Users,{className:"w-4 h-4 text-muted-foreground"}),(0,t.jsx)("span",{className:"text-foreground font-medium",children:F.userCount})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{className:"text-muted-foreground",children:"创建时间"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(N.Clock,{className:"w-4 h-4 text-muted-foreground"}),(0,t.jsx)("span",{className:"text-foreground",children:F.tenant.createTime?new Date(F.tenant.createTime).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{className:"text-muted-foreground",children:"更新时间"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(N.Clock,{className:"w-4 h-4 text-muted-foreground"}),(0,t.jsx)("span",{className:"text-foreground",children:F.tenant.updateTime?new Date(F.tenant.updateTime).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-"})]})]})]}),F.tenant.description&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{className:"text-muted-foreground",children:"租户描述"}),(0,t.jsx)("p",{className:"text-sm text-foreground bg-muted/50 p-3 rounded-lg",children:F.tenant.description})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 pt-2 border-t border-border",children:[(0,t.jsx)(f.Shield,{className:"w-4 h-4 text-muted-foreground"}),(0,t.jsxs)("span",{className:"text-xs text-muted-foreground",children:["租户 ID: ",F.tenant.tenantId]})]})]}),(0,t.jsx)(d.DialogFooter,{children:(0,t.jsx)(r.Button,{onClick:()=>P(!1),children:"关闭"})})]})}),(0,t.jsx)(d.Dialog,{open:B,onOpenChange:E,children:(0,t.jsxs)(d.DialogContent,{className:"sm:max-w-md",children:[(0,t.jsxs)(d.DialogHeader,{children:[(0,t.jsx)(d.DialogTitle,{children:"编辑租户"}),(0,t.jsx)(d.DialogDescription,{children:"修改租户信息"})]}),M&&(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"editName",children:"租户名称"}),(0,t.jsx)(l.Input,{id:"editName",value:M.tenant.tenantName,onChange:e=>R({...M,tenant:{...M.tenant,tenantName:e.target.value}}),className:"bg-card border-border"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"editDescription",children:"租户描述"}),(0,t.jsx)(l.Input,{id:"editDescription",value:M.tenant.description||"",onChange:e=>R({...M,tenant:{...M.tenant,description:e.target.value}}),className:"bg-card border-border"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"editStatus",children:"租户状态"}),(0,t.jsxs)(o.Select,{value:1===M.tenant.tenantStatus?"active":"suspended",onValueChange:e=>R({...M,tenant:{...M.tenant,tenantStatus:+("active"===e)}}),children:[(0,t.jsx)(o.SelectTrigger,{id:"editStatus",children:(0,t.jsx)(o.SelectValue,{})}),(0,t.jsxs)(o.SelectContent,{children:[(0,t.jsx)(o.SelectItem,{value:"active",children:"已激活"}),(0,t.jsx)(o.SelectItem,{value:"suspended",children:"已停用"})]})]})]})]}),(0,t.jsxs)(d.DialogFooter,{children:[(0,t.jsx)(r.Button,{variant:"outline",onClick:()=>E(!1),children:"取消"}),(0,t.jsx)(r.Button,{onClick:et,disabled:Q,children:Q?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"保存中..."]}):"保存更改"})]})]})})]})}e.s(["default",()=>D])}]);