(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,91799,97250,e=>{"use strict";var t=e.i(75254);let s=(0,t.default)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);e.s(["Moon",()=>s],91799);let r=(0,t.default)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);e.s(["Sun",()=>r],97250)},67881,20783,91918,25913,e=>{"use strict";var t=e.i(43476),s=e.i(71645);function r(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function n(...e){return t=>{let s=!1,n=e.map(e=>{let n=r(e,t);return s||"function"!=typeof n||(s=!0),n});if(s)return()=>{for(let t=0;t<n.length;t++){let s=n[t];"function"==typeof s?s():r(e[t],null)}}}}function i(...e){return s.useCallback(n(...e),e)}e.s(["composeRefs",()=>n,"useComposedRefs",()=>i],20783);var a=s.forwardRef((e,r)=>{let{children:n,...i}=e,a=s.Children.toArray(n),o=a.find(c);if(o){let e=o.props.children,n=a.map(t=>t!==o?t:s.Children.count(e)>1?s.Children.only(null):s.isValidElement(e)?e.props.children:null);return(0,t.jsx)(l,{...i,ref:r,children:s.isValidElement(e)?s.cloneElement(e,void 0,n):null})}return(0,t.jsx)(l,{...i,ref:r,children:n})});a.displayName="Slot";var l=s.forwardRef((e,t)=>{let{children:r,...i}=e;if(s.isValidElement(r)){var a;let e,l,o=(a=r,(l=(e=Object.getOwnPropertyDescriptor(a.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?a.ref:(l=(e=Object.getOwnPropertyDescriptor(a,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?a.props.ref:a.props.ref||a.ref);return s.cloneElement(r,{...function(e,t){let s={...t};for(let r in t){let n=e[r],i=t[r];/^on[A-Z]/.test(r)?n&&i?s[r]=(...e)=>{i(...e),n(...e)}:n&&(s[r]=n):"style"===r?s[r]={...n,...i}:"className"===r&&(s[r]=[n,i].filter(Boolean).join(" "))}return{...e,...s}}(i,r.props),ref:t?n(t,o):o})}return s.Children.count(r)>1?s.Children.only(null):null});l.displayName="SlotClone";var o=({children:e})=>(0,t.jsx)(t.Fragment,{children:e});function c(e){return s.isValidElement(e)&&e.type===o}e.s(["Slot",()=>a],91918);var d=e.i(7670);let u=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,h=d.clsx,m=(e,t)=>s=>{var r;if((null==t?void 0:t.variants)==null)return h(e,null==s?void 0:s.class,null==s?void 0:s.className);let{variants:n,defaultVariants:i}=t,a=Object.keys(n).map(e=>{let t=null==s?void 0:s[e],r=null==i?void 0:i[e];if(null===t)return null;let a=u(t)||u(r);return n[e][a]}),l=s&&Object.entries(s).reduce((e,t)=>{let[s,r]=t;return void 0===r||(e[s]=r),e},{});return h(e,a,null==t||null==(r=t.compoundVariants)?void 0:r.reduce((e,t)=>{let{class:s,className:r,...n}=t;return Object.entries(n).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes({...i,...l}[t]):({...i,...l})[t]===s})?[...e,s,r]:e},[]),null==s?void 0:s.class,null==s?void 0:s.className)};e.s(["cva",0,m],25913);var f=e.i(47163);let x=m("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function p({className:e,variant:s,size:r,asChild:n=!1,...i}){let l=n?a:"button";return(0,t.jsx)(l,{"data-slot":"button",className:(0,f.cn)(x({variant:s,size:r,className:e})),...i})}e.s(["Button",()=>p],67881)},93539,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(91799),n=e.i(97250),i=e.i(67881),a=e.i(89554);function l(){let{setTheme:e,theme:l}=(0,a.useTheme)(),[o,c]=s.useState(!1);return(s.useEffect(()=>{c(!0)},[]),o)?(0,t.jsxs)(i.Button,{variant:"ghost",size:"icon",onClick:()=>{"light"===l?e("dark"):"dark"===l?e("system"):e("light")},children:["light"===l&&(0,t.jsx)(n.Sun,{className:"h-5 w-5"}),"dark"===l&&(0,t.jsx)(r.Moon,{className:"h-5 w-5"}),"system"===l&&(0,t.jsx)("div",{className:"h-5 w-5 flex items-center justify-center text-xs font-medium",children:"A"}),(0,t.jsx)("span",{className:"sr-only",children:"切换主题"})]}):(0,t.jsxs)(i.Button,{variant:"ghost",size:"icon",children:[(0,t.jsx)(n.Sun,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"sr-only",children:"切换主题"})]})}e.s(["ThemeToggle",()=>l])},13293,e=>{"use strict";var t=e.i(43476),s=e.i(93539);function r({title:e,description:r}){return(0,t.jsxs)("header",{className:"h-16 border-b border-border bg-card px-6 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-lg font-semibold text-foreground",children:e}),r&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:r})]}),(0,t.jsx)("div",{className:"flex items-center gap-4",children:(0,t.jsx)(s.ThemeToggle,{})})]})}e.s(["Header",()=>r])},16715,e=>{"use strict";let t=(0,e.i(75254).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>t],16715)},78928,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(13293),n=e.i(47163);function i({title:e,value:s,change:r,changeType:i="neutral",icon:a}){return(0,t.jsx)("div",{className:"bg-card border border-border rounded-xl p-5",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e}),(0,t.jsx)("p",{className:"text-2xl font-semibold text-foreground mt-1",children:s}),r&&(0,t.jsx)("p",{className:(0,n.cn)("text-xs mt-2","increase"===i&&"text-success","decrease"===i&&"text-destructive","neutral"===i&&"text-muted-foreground"),children:r})]}),(0,t.jsx)("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:(0,t.jsx)(a,{className:"w-5 h-5 text-primary"})})]})})}var a=e.i(61911),l=e.i(98919),o=e.i(34161),c=e.i(16715),d=e.i(7486),u=e.i(38036);function h(){let[e,n]=(0,s.useState)(0),[h,m]=(0,s.useState)(0),[f,x]=(0,s.useState)(0),[p,v]=(0,s.useState)(0),[g,b]=(0,s.useState)([]),[j,y]=(0,s.useState)(!0),[N,w]=(0,s.useState)(!1),k=async()=>{w(!0);try{let e=await (0,u.fetchWithAuth)("/sys/log/recent"),t=await e.json();200===t.code&&b(t.data||[])}catch(e){console.error("刷新最近活动失败",e)}finally{w(!1)}};return(0,s.useEffect)(()=>{(async()=>{try{let e=(0,u.isAdminTenant)(),t=[(0,u.fetchWithAuth)("/sys/log/recent")];e&&t.push((0,u.fetchWithAuth)("/admin/tenant/count"),(0,u.fetchWithAuth)("/admin/users/count"),(0,u.fetchWithAuth)("/admin/roles/count"),(0,u.fetchWithAuth)("/admin/permissions/count"));let s=await Promise.all(t),r=await s[0].json();if(200===r.code&&b(r.data||[]),e){let e=await s[1].json(),t=await s[2].json(),r=await s[3].json(),i=await s[4].json();200===e.code&&n(e.data||0),200===t.code&&m(t.data||0),200===r.code&&x(r.data||0),200===i.code&&v(i.data||0)}}catch(e){console.error("获取统计数据失败",e)}finally{y(!1)}})()},[]),(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[(0,t.jsx)(r.Header,{title:"仪表盘",description:"多租户鉴权管理平台概览"}),(0,t.jsxs)("div",{className:"flex-1 p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsx)(i,{title:"租户总数",value:j?"...":e.toLocaleString(),icon:d.Building2}),(0,t.jsx)(i,{title:"用户总数",value:j?"...":h.toLocaleString(),icon:a.Users}),(0,t.jsx)(i,{title:"角色数量",value:j?"...":f.toLocaleString(),icon:l.Shield}),(0,t.jsx)(i,{title:"权限项",value:j?"...":p.toLocaleString(),icon:o.Key})]}),(0,t.jsxs)("div",{className:"bg-card border border-border rounded-xl p-5",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h3",{className:"font-semibold text-foreground",children:"最近活动"}),(0,t.jsxs)("button",{onClick:k,disabled:N,className:"flex items-center gap-1.5 text-xs text-muted-foreground hover:text-foreground transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,t.jsx)(c.RefreshCw,{className:`w-3.5 h-3.5 ${N?"animate-spin":""}`}),(0,t.jsx)("span",{children:"刷新"})]})]}),(0,t.jsx)("div",{className:"space-y-3",children:0===g.length?(0,t.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"暂无最近活动"}):g.map((e,s)=>{var r;let n,i,a,l,o,c;return(0,t.jsxs)("div",{className:"py-2 border-b border-border last:border-0",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-foreground",children:e.username}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:(r=e.createTime,n=new Date,i=new Date(r),l=Math.floor((a=n.getTime()-i.getTime())/6e4),o=Math.floor(a/36e5),(c=Math.floor(a/864e5))>0?`${c} 天前`:o>0?`${o} 小时前`:l>0?`${l} 分钟前`:"刚刚")})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,t.jsx)("span",{className:"text-muted-foreground truncate flex-1",children:e.url}),(0,t.jsx)("span",{className:`px-2 py-0.5 rounded ${200===e.status?"bg-success/10 text-success":"bg-destructive/10 text-destructive"}`,children:e.status})]})]},s)})})]})]})]})}e.s(["default",()=>h],78928)}]);