(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,13293,55436,e=>{"use strict";var s=e.i(43476);let t=(0,e.i(75254).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);e.s(["Search",()=>t],55436);var r=e.i(84614),a=e.i(67881),d=e.i(23750),l=e.i(63415),i=e.i(93539);function n({title:e,description:n}){return(0,s.jsxs)("header",{className:"h-16 border-b border-border bg-card px-6 flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-lg font-semibold text-foreground",children:e}),n&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:n})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(t,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,s.jsx)(d.Input,{placeholder:"搜索...",className:"w-64 pl-9 bg-muted border-border"})]}),(0,s.jsx)(i.ThemeToggle,{}),(0,s.jsxs)(l.DropdownMenu,{children:[(0,s.jsx)(l.DropdownMenuTrigger,{asChild:!0,children:(0,s.jsxs)(a.Button,{variant:"ghost",className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center",children:(0,s.jsx)(r.User,{className:"w-4 h-4 text-primary"})}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"管理员"})]})}),(0,s.jsxs)(l.DropdownMenuContent,{align:"end",className:"w-48",children:[(0,s.jsx)(l.DropdownMenuLabel,{children:"我的账户"}),(0,s.jsx)(l.DropdownMenuSeparator,{}),(0,s.jsx)(l.DropdownMenuItem,{children:"个人设置"}),(0,s.jsx)(l.DropdownMenuItem,{children:"修改密码"}),(0,s.jsx)(l.DropdownMenuSeparator,{}),(0,s.jsx)(l.DropdownMenuItem,{className:"text-destructive",children:"退出登录"})]})]})]})]})}e.s(["Header",()=>n],13293)},16715,e=>{"use strict";let s=(0,e.i(75254).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>s],16715)},78928,e=>{"use strict";var s=e.i(43476),t=e.i(71645),r=e.i(13293),a=e.i(47163);function d({title:e,value:t,change:r,changeType:d="neutral",icon:l}){return(0,s.jsx)("div",{className:"bg-card border border-border rounded-xl p-5",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:e}),(0,s.jsx)("p",{className:"text-2xl font-semibold text-foreground mt-1",children:t}),r&&(0,s.jsx)("p",{className:(0,a.cn)("text-xs mt-2","increase"===d&&"text-success","decrease"===d&&"text-destructive","neutral"===d&&"text-muted-foreground"),children:r})]}),(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:(0,s.jsx)(l,{className:"w-5 h-5 text-primary"})})]})})}var l=e.i(61911),i=e.i(98919),n=e.i(34161),c=e.i(75254);let x=(0,c.default)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),o=(0,c.default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var m=e.i(16715),u=e.i(7486),h=e.i(38036);function j(){let[e,a]=(0,t.useState)(0),[c,j]=(0,t.useState)(0),[f,p]=(0,t.useState)(0),[g,N]=(0,t.useState)(0),[b,v]=(0,t.useState)([]),[y,w]=(0,t.useState)(!0),[M,S]=(0,t.useState)(!1),A=async()=>{S(!0);try{let e=await (0,h.fetchWithAuth)("/sys/log/recent"),s=await e.json();200===s.code&&v(s.data||[])}catch(e){console.error("刷新最近活动失败",e)}finally{S(!1)}};return(0,t.useEffect)(()=>{(async()=>{try{let e=(0,h.isAdminTenant)(),s=[(0,h.fetchWithAuth)("/sys/log/recent")];e&&s.push((0,h.fetchWithAuth)("/admin/tenant/count"),(0,h.fetchWithAuth)("/admin/users/count"),(0,h.fetchWithAuth)("/admin/roles/count"),(0,h.fetchWithAuth)("/admin/permissions/count"));let t=await Promise.all(s),r=await t[0].json();if(200===r.code&&v(r.data||[]),e){let e=await t[1].json(),s=await t[2].json(),r=await t[3].json(),d=await t[4].json();200===e.code&&a(e.data||0),200===s.code&&j(s.data||0),200===r.code&&p(r.data||0),200===d.code&&N(d.data||0)}}catch(e){console.error("获取统计数据失败",e)}finally{w(!1)}})()},[]),(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsx)(r.Header,{title:"仪表盘",description:"多租户鉴权管理平台概览"}),(0,s.jsxs)("div",{className:"flex-1 p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,s.jsx)(d,{title:"租户总数",value:y?"...":e.toLocaleString(),icon:u.Building2}),(0,s.jsx)(d,{title:"用户总数",value:y?"...":c.toLocaleString(),icon:l.Users}),(0,s.jsx)(d,{title:"角色数量",value:y?"...":f.toLocaleString(),icon:i.Shield}),(0,s.jsx)(d,{title:"权限项",value:y?"...":g.toLocaleString(),icon:n.Key})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-card border border-border rounded-xl p-5",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-foreground",children:"系统状态"}),(0,s.jsx)("span",{className:"text-xs text-success bg-success/10 px-2 py-1 rounded-full",children:"运行正常"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(x,{className:"w-4 h-4 text-primary"}),(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"API 响应时间"})]}),(0,s.jsx)("span",{className:"text-sm font-medium text-foreground",children:"45ms"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(x,{className:"w-4 h-4 text-primary"}),(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"今日请求数"})]}),(0,s.jsx)("span",{className:"text-sm font-medium text-foreground",children:"12,847"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(x,{className:"w-4 h-4 text-primary"}),(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"认证成功率"})]}),(0,s.jsx)("span",{className:"text-sm font-medium text-foreground",children:"99.8%"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(x,{className:"w-4 h-4 text-primary"}),(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"缓存命中率"})]}),(0,s.jsx)("span",{className:"text-sm font-medium text-foreground",children:"94.2%"})]})]})]}),(0,s.jsxs)("div",{className:"bg-card border border-border rounded-xl p-5",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-foreground",children:"最近告警"}),(0,s.jsx)("span",{className:"text-xs text-warning bg-warning/10 px-2 py-1 rounded-full",children:"2 条未处理"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-muted/50 rounded-lg",children:[(0,s.jsx)(o,{className:"w-4 h-4 text-warning mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-foreground",children:"登录失败次数异常"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:'租户 "Acme Corp" 在过去1小时内登录失败 23 次'}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"10 分钟前"})]})]}),(0,s.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-muted/50 rounded-lg",children:[(0,s.jsx)(o,{className:"w-4 h-4 text-destructive mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-foreground",children:"权限配置变更"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:'管理员修改了 "超级管理员" 角色的权限配置'}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"32 分钟前"})]})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-card border border-border rounded-xl p-5",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-foreground",children:"最近活动"}),(0,s.jsxs)("button",{onClick:A,disabled:M,className:"flex items-center gap-1.5 text-xs text-muted-foreground hover:text-foreground transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,s.jsx)(m.RefreshCw,{className:`w-3.5 h-3.5 ${M?"animate-spin":""}`}),(0,s.jsx)("span",{children:"刷新"})]})]}),(0,s.jsx)("div",{className:"space-y-3",children:0===b.length?(0,s.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"暂无最近活动"}):b.map((e,t)=>{var r;let a,d,l,i,n,c;return(0,s.jsxs)("div",{className:"py-2 border-b border-border last:border-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-foreground",children:e.username}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:(r=e.createTime,a=new Date,d=new Date(r),i=Math.floor((l=a.getTime()-d.getTime())/6e4),n=Math.floor(l/36e5),(c=Math.floor(l/864e5))>0?`${c} 天前`:n>0?`${n} 小时前`:i>0?`${i} 分钟前`:"刚刚")})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,s.jsx)("span",{className:"text-muted-foreground truncate flex-1",children:e.url}),(0,s.jsx)("span",{className:`px-2 py-0.5 rounded ${200===e.status?"bg-success/10 text-success":"bg-destructive/10 text-destructive"}`,children:e.status})]})]},t)})})]})]})]})}e.s(["default",()=>j],78928)}]);